<?php
// Set block ID and classes
$id = !empty($block['anchor']) ? $block['anchor'] : 'lmn-' . $block['id'];
$className = 'lmn-figpie'
    . (!empty($block['className']) ? ' ' . $block['className'] : '')
    . (!empty($block['align']) ? ' align' . $block['align'] : '');
$cleanedClassName = trim(str_replace('lmn-figpie', '', $className));

if (is_admin()) {
    echo '<p><strong>Figpie</strong> â€“ interactive on front end.</p>';
    return;
}

?>

<div class="<?= esc_attr($className); ?>">

    <div class="figpie-wrapper" x-data="figpieModal()">

        <?php

        if (have_rows('figpie')):


            $index = 0;
            while (have_rows('figpie')) : the_row();

                $figpie_type = get_sub_field('figpie_type');

                // Store post data for Alpine.js
                $post_data = array(
                    'title' => get_sub_field('label'),
                    'content' => get_sub_field('text')
                );

                $stats = array();
                if (have_rows('stats')) {
                    while (have_rows('stats')) {
                        the_row();
                        $stats[] = array(
                            'label' => get_sub_field('stats_label'),
                            'value' => get_sub_field('stats_value')
                        );
                    }
                }
                $post_data['stats'] = $stats;

                $posts_data[] = $post_data;

        ?>

                <div class="col">

                    <?php if ($figpie_type == 'public'): ?>

                        <svg width="402" height="402" viewBox="0 0 402 402" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M201.001 201.316L376.262 297.667C323.049 394.461 201.444 429.791 104.65 376.578C86.2589 366.467 69.5737 353.525 55.207 338.226L201.001 201.316Z" fill="#34335D" stroke="#010035" />
                            <g clip-path="url(#clip0_5_14214)">
                                <path opacity="0.5" d="M201.501 3.40234L169.745 35.1582L170.452 35.8652L201.501 4.81641V11.4023L177.745 35.1582L178.452 35.8652L201.501 12.8164V19.4023L185.745 35.1582L186.452 35.8652L201.501 20.8164V201.316L200.536 201.5L138.215 44.1016L180.44 1.87598C182.835 1.62915 185.234 1.42522 187.638 1.26465L142.335 46.5684L143.042 47.2754L189.15 1.16602C191.438 1.03055 193.73 0.935874 196.023 0.878906L161.745 35.1582L162.452 35.8652L197.466 0.850586C198.644 0.829815 199.822 0.816406 201.001 0.816406H201.501V3.40234ZM137.814 43.0879L135.946 38.3701L171.282 3.03418C173.8 2.65682 176.325 2.32724 178.856 2.0459L137.814 43.0879ZM135.546 37.3564L133.678 32.6387L161.586 4.73047C164.251 4.19621 166.926 3.71754 169.61 3.29199L135.546 37.3564ZM133.277 31.625L131.409 26.9072L151.219 7.09766C154.066 6.36774 156.929 5.70142 159.805 5.09766L133.277 31.625ZM131.009 25.8936L129.141 21.1758L139.989 10.3271C143.074 9.34166 146.18 8.43072 149.306 7.59668L131.009 25.8936ZM128.739 20.1631L126.911 15.5449L126.727 15.0801L127.192 14.8965C130.726 13.4975 134.295 12.2022 137.894 11.0088L128.739 20.1631Z" fill="#34335D" />
                            </g>
                            <path d="M201.001 201.319L55.2069 338.228C-20.4061 257.708 -16.4285 131.138 64.0912 55.5249C82.4666 38.2692 103.938 24.6428 127.376 15.3633L201.001 201.319Z" fill="#34335D" stroke="#010035" />
                            <path d="M201 201.316V1.31641C311.457 1.31641 401 90.8595 401 201.316C401 235.004 392.491 268.146 376.261 297.667L201 201.316Z" fill="#75C69B" stroke="#010035" />
                            <circle cx="200.991" cy="201.307" r="169.991" fill="#010035" stroke="#010035" stroke-width="2" />
                            <g class="button" @click="openModal(<?php echo $index; ?>)">

                                <g class="circle">
                                    <rect x="163.668" y="103.5" width="70" height="61" stroke="#010035" />
                                    <circle cx="198.668" cy="119" r="15.25" fill="#75C69B" stroke="#75C69B" stroke-width="1.5" />

                                    <rect width="16" height="16" transform="translate(190.668 111)" fill="#75C69B" />
                                    <path d="M198.668 114.332V123.665" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                    <path d="M194.004 119H203.337" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />

                                </g>
                                <path d="M164.442 149.2H165.716V157.922H170.826V159H164.442V149.2ZM174.702 159.21C174.03 159.21 173.447 159.07 172.952 158.79C172.467 158.51 172.089 158.099 171.818 157.558C171.557 157.017 171.426 156.363 171.426 155.598C171.426 154.917 171.562 154.305 171.832 153.764C172.112 153.223 172.495 152.798 172.98 152.49C173.475 152.182 174.026 152.028 174.632 152.028C175.295 152.028 175.86 152.177 176.326 152.476C176.793 152.765 177.148 153.181 177.39 153.722C177.633 154.254 177.754 154.884 177.754 155.612V155.85H172.63C172.64 156.354 172.733 156.788 172.91 157.152C173.097 157.516 173.344 157.796 173.652 157.992C173.97 158.179 174.324 158.272 174.716 158.272C175.174 158.272 175.566 158.169 175.892 157.964C176.219 157.749 176.42 157.399 176.494 156.914H177.684C177.638 157.334 177.498 157.717 177.264 158.062C177.031 158.407 176.695 158.687 176.256 158.902C175.827 159.107 175.309 159.21 174.702 159.21ZM176.466 154.996C176.466 154.38 176.303 153.89 175.976 153.526C175.659 153.162 175.211 152.98 174.632 152.98C174.082 152.98 173.629 153.171 173.274 153.554C172.92 153.937 172.719 154.417 172.672 154.996H176.466ZM181.325 159.21C180.896 159.21 180.504 159.126 180.149 158.958C179.794 158.79 179.514 158.552 179.309 158.244C179.104 157.927 179.001 157.563 179.001 157.152C179.001 156.545 179.206 156.069 179.617 155.724C180.037 155.379 180.578 155.155 181.241 155.052L182.683 154.828C182.935 154.791 183.112 154.721 183.215 154.618C183.318 154.515 183.369 154.361 183.369 154.156C183.369 153.792 183.243 153.507 182.991 153.302C182.739 153.087 182.412 152.98 182.011 152.98C181.507 152.98 181.12 153.106 180.849 153.358C180.578 153.601 180.434 153.937 180.415 154.366H179.211C179.23 153.946 179.346 153.559 179.561 153.204C179.776 152.849 180.084 152.565 180.485 152.35C180.896 152.135 181.372 152.028 181.913 152.028C182.464 152.028 182.935 152.131 183.327 152.336C183.728 152.541 184.032 152.835 184.237 153.218C184.442 153.601 184.545 154.053 184.545 154.576V159H183.397V158.664C183.397 158.468 183.397 158.277 183.397 158.09C183.229 158.445 182.963 158.72 182.599 158.916C182.244 159.112 181.82 159.21 181.325 159.21ZM181.493 158.272C181.848 158.272 182.165 158.197 182.445 158.048C182.734 157.889 182.958 157.675 183.117 157.404C183.285 157.124 183.369 156.807 183.369 156.452V155.458C183.332 155.523 183.248 155.579 183.117 155.626C182.996 155.673 182.832 155.715 182.627 155.752L181.647 155.934C181.218 156.018 180.877 156.158 180.625 156.354C180.373 156.55 180.247 156.816 180.247 157.152C180.247 157.488 180.364 157.759 180.597 157.964C180.84 158.169 181.138 158.272 181.493 158.272ZM186.53 152.252H187.734V152.546C187.734 152.817 187.734 153.092 187.734 153.372C187.911 152.971 188.182 152.649 188.546 152.406C188.919 152.154 189.353 152.028 189.848 152.028C189.979 152.028 190.081 152.033 190.156 152.042V153.232C190.025 153.213 189.899 153.204 189.778 153.204C189.339 153.204 188.966 153.288 188.658 153.456C188.359 153.615 188.131 153.862 187.972 154.198C187.813 154.525 187.734 154.935 187.734 155.43V159H186.53V152.252ZM191.507 152.252H192.697V152.714C192.697 152.863 192.697 153.013 192.697 153.162C192.893 152.845 193.182 152.579 193.565 152.364C193.947 152.14 194.353 152.028 194.783 152.028C195.296 152.028 195.739 152.135 196.113 152.35C196.486 152.555 196.771 152.863 196.967 153.274C197.172 153.685 197.275 154.175 197.275 154.744V159H196.071V154.898C196.071 154.245 195.954 153.764 195.721 153.456C195.487 153.139 195.109 152.98 194.587 152.98C194.204 152.98 193.868 153.069 193.579 153.246C193.299 153.423 193.084 153.661 192.935 153.96C192.785 154.259 192.711 154.585 192.711 154.94V159H191.507V152.252ZM202.554 152.252H203.758V152.784C203.758 152.905 203.758 153.031 203.758 153.162C203.972 152.817 204.248 152.541 204.584 152.336C204.929 152.131 205.312 152.028 205.732 152.028C206.189 152.028 206.59 152.14 206.936 152.364C207.29 152.588 207.566 152.919 207.762 153.358C208.004 152.947 208.312 152.625 208.686 152.392C209.068 152.149 209.493 152.028 209.96 152.028C210.426 152.028 210.837 152.126 211.192 152.322C211.546 152.518 211.822 152.821 212.018 153.232C212.223 153.633 212.326 154.133 212.326 154.73V159H211.122V154.968C211.122 154.305 211.01 153.811 210.786 153.484C210.571 153.148 210.212 152.98 209.708 152.98C209.362 152.98 209.064 153.073 208.812 153.26C208.56 153.437 208.368 153.68 208.238 153.988C208.107 154.287 208.042 154.618 208.042 154.982V159H206.838V155.01C206.838 154.347 206.726 153.843 206.502 153.498C206.287 153.153 205.937 152.98 205.452 152.98C205.116 152.98 204.817 153.073 204.556 153.26C204.304 153.447 204.108 153.699 203.968 154.016C203.828 154.324 203.758 154.665 203.758 155.038V159H202.554V152.252ZM217.209 159.21C216.565 159.21 215.991 159.061 215.487 158.762C214.983 158.463 214.591 158.043 214.311 157.502C214.031 156.951 213.891 156.321 213.891 155.612C213.891 154.921 214.031 154.305 214.311 153.764C214.591 153.213 214.983 152.789 215.487 152.49C215.991 152.182 216.565 152.028 217.209 152.028C217.844 152.028 218.413 152.182 218.917 152.49C219.421 152.789 219.813 153.213 220.093 153.764C220.382 154.305 220.527 154.921 220.527 155.612C220.527 156.321 220.382 156.951 220.093 157.502C219.813 158.043 219.421 158.463 218.917 158.762C218.413 159.061 217.844 159.21 217.209 159.21ZM217.209 158.272C217.629 158.272 217.993 158.16 218.301 157.936C218.618 157.712 218.861 157.399 219.029 156.998C219.197 156.597 219.281 156.135 219.281 155.612C219.281 154.819 219.09 154.184 218.707 153.708C218.334 153.223 217.834 152.98 217.209 152.98C216.798 152.98 216.434 153.092 216.117 153.316C215.8 153.531 215.557 153.839 215.389 154.24C215.221 154.632 215.137 155.089 215.137 155.612C215.137 156.415 215.324 157.059 215.697 157.544C216.07 158.029 216.574 158.272 217.209 158.272ZM222.159 152.252H223.363V152.546C223.363 152.817 223.363 153.092 223.363 153.372C223.54 152.971 223.811 152.649 224.175 152.406C224.548 152.154 224.982 152.028 225.477 152.028C225.608 152.028 225.71 152.033 225.785 152.042V153.232C225.654 153.213 225.528 153.204 225.407 153.204C224.968 153.204 224.595 153.288 224.287 153.456C223.988 153.615 223.76 153.862 223.601 154.198C223.442 154.525 223.363 154.935 223.363 155.43V159H222.159V152.252ZM229.718 159.21C229.046 159.21 228.463 159.07 227.968 158.79C227.483 158.51 227.105 158.099 226.834 157.558C226.573 157.017 226.442 156.363 226.442 155.598C226.442 154.917 226.577 154.305 226.848 153.764C227.128 153.223 227.511 152.798 227.996 152.49C228.491 152.182 229.041 152.028 229.648 152.028C230.311 152.028 230.875 152.177 231.342 152.476C231.809 152.765 232.163 153.181 232.406 153.722C232.649 154.254 232.77 154.884 232.77 155.612V155.85H227.646C227.655 156.354 227.749 156.788 227.926 157.152C228.113 157.516 228.36 157.796 228.668 157.992C228.985 158.179 229.34 158.272 229.732 158.272C230.189 158.272 230.581 158.169 230.908 157.964C231.235 157.749 231.435 157.399 231.51 156.914H232.7C232.653 157.334 232.513 157.717 232.28 158.062C232.047 158.407 231.711 158.687 231.272 158.902C230.843 159.107 230.325 159.21 229.718 159.21ZM231.482 154.996C231.482 154.38 231.319 153.89 230.992 153.526C230.675 153.162 230.227 152.98 229.648 152.98C229.097 152.98 228.645 153.171 228.29 153.554C227.935 153.937 227.735 154.417 227.688 154.996H231.482Z" fill="white" />

                            </g>

                            <rect x="136.168" y="211" width="129" height="110.777" stroke="#010035" stroke-width="2" />
                            <path d="M162.192 266.952C152.616 266.952 146.512 261.016 146.008 251.384H148.808C149.2 259.448 154.128 264.096 161.408 264.096C168.576 264.096 172.104 259.728 172.104 254.296C172.104 248.36 168.352 244.664 160.232 244.664H155.808V242.368H160.176C167.008 242.368 171.04 238.56 171.04 233.184C171.04 229.04 168.576 225.12 162.08 225.12C155.472 225.12 151.496 229.096 150.712 235.76H146.288C147.24 228.032 153.4 222.824 162.64 222.824C171.208 222.824 175.8 227.304 175.8 233.072C175.8 238.56 171.6 242.256 165.216 243.264C172.16 244.048 177.088 247.912 177.088 254.52C177.088 261.24 171.6 266.952 162.192 266.952ZM198.286 266.952C188.71 266.952 182.606 261.016 182.102 251.384H184.902C185.294 259.448 190.222 264.096 197.502 264.096C204.67 264.096 208.198 259.728 208.198 254.296C208.198 248.36 204.446 244.664 196.326 244.664H191.902V242.368H196.27C203.102 242.368 207.134 238.56 207.134 233.184C207.134 229.04 204.67 225.12 198.174 225.12C191.566 225.12 187.59 229.096 186.806 235.76H182.382C183.334 228.032 189.494 222.824 198.734 222.824C207.302 222.824 211.894 227.304 211.894 233.072C211.894 238.56 207.694 242.256 201.31 243.264C208.254 244.048 213.182 247.912 213.182 254.52C213.182 261.24 207.694 266.952 198.286 266.952ZM219.484 266L251.292 223.608H254.148L222.284 266H219.484ZM217.748 231.896C217.748 226.688 221.556 223.048 226.82 223.048C232.14 223.048 235.948 226.688 235.948 231.896C235.948 237.104 232.14 240.8 226.82 240.8C221.556 240.8 217.748 237.104 217.748 231.896ZM221.164 231.896C221.164 236.32 223.292 239.008 226.82 239.008C230.348 239.008 232.532 236.32 232.532 231.896C232.532 227.528 230.348 224.84 226.82 224.84C223.292 224.84 221.164 227.528 221.164 231.896ZM237.572 257.712C237.572 252.448 241.324 248.808 246.644 248.808C251.908 248.808 255.716 252.448 255.716 257.712C255.716 262.864 251.908 266.616 246.644 266.616C241.324 266.616 237.572 262.864 237.572 257.712ZM240.988 257.712C240.988 262.08 243.06 264.768 246.644 264.768C250.172 264.768 252.3 262.08 252.3 257.712C252.3 253.288 250.172 250.6 246.644 250.6C243.06 250.6 240.988 253.288 240.988 257.712Z" fill="white" />
                            <path d="M187.587 282.2H189.505L194.475 290.558C194.475 290.147 194.475 289.737 194.475 289.326V282.2H195.763V292H193.985L188.861 283.432C188.861 283.824 188.861 284.221 188.861 284.622V292H187.587V282.2ZM201.035 282.2H202.575L206.509 292H205.095L202.057 284.104C202.029 284.029 202.001 283.955 201.973 283.88C201.908 283.703 201.843 283.53 201.777 283.362C201.74 283.474 201.707 283.558 201.679 283.614C201.661 283.67 201.633 283.754 201.595 283.866L201.497 284.104L198.459 292H197.115L201.035 282.2ZM199.369 288.024H204.171V289.088H199.369V288.024ZM205.962 282.2H207.362L209.98 289.326C210.092 289.606 210.199 289.891 210.302 290.18C210.358 290.329 210.414 290.479 210.47 290.628C210.517 290.488 210.596 290.278 210.708 289.998C210.792 289.774 210.876 289.55 210.96 289.326L213.578 282.2H214.936L211.142 292H209.672L205.962 282.2Z" fill="#CBD8FF" />
<path xmlns="http://www.w3.org/2000/svg" d="M137.397 302.761H141.765C142.48 302.761 143.12 302.862 143.685 303.065C144.261 303.257 144.725 303.593 145.077 304.073C145.429 304.542 145.605 305.166 145.605 305.945C145.605 306.713 145.435 307.337 145.093 307.817C144.752 308.286 144.293 308.622 143.717 308.825C143.152 309.017 142.501 309.113 141.765 309.113H138.853V313.961H137.397V302.761ZM141.749 307.897C142.571 307.897 143.168 307.726 143.541 307.385C143.925 307.044 144.117 306.564 144.117 305.945C144.117 305.316 143.925 304.83 143.541 304.489C143.168 304.148 142.571 303.977 141.749 303.977H138.853V307.897H141.749ZM149.876 314.201C149.279 314.201 148.772 314.084 148.356 313.849C147.94 313.614 147.626 313.273 147.412 312.825C147.199 312.366 147.092 311.812 147.092 311.161V306.249H148.468V310.873C148.468 311.63 148.607 312.196 148.884 312.569C149.162 312.942 149.61 313.129 150.228 313.129C150.644 313.129 150.996 313.028 151.284 312.825C151.583 312.612 151.807 312.313 151.956 311.929C152.116 311.534 152.196 311.06 152.196 310.505V306.249H153.556V313.961H152.212V313.497C152.212 313.337 152.212 313.182 152.212 313.033V312.889C152.031 313.294 151.727 313.614 151.3 313.849C150.874 314.084 150.399 314.201 149.876 314.201ZM159.81 314.201C159.277 314.201 158.786 314.084 158.338 313.849C157.89 313.604 157.544 313.284 157.298 312.889C157.298 313.102 157.298 313.321 157.298 313.545V313.961H155.922V302.761H157.298V306.665C157.298 306.868 157.298 307.076 157.298 307.289C157.565 306.916 157.917 306.606 158.354 306.361C158.802 306.116 159.298 305.993 159.842 305.993C160.568 305.993 161.197 306.169 161.73 306.521C162.274 306.873 162.685 307.364 162.962 307.993C163.25 308.612 163.394 309.316 163.394 310.105C163.394 310.905 163.245 311.614 162.946 312.233C162.658 312.852 162.242 313.337 161.698 313.689C161.154 314.03 160.525 314.201 159.81 314.201ZM159.586 313.129C160.056 313.129 160.466 313.001 160.818 312.745C161.181 312.489 161.458 312.137 161.65 311.689C161.853 311.23 161.954 310.702 161.954 310.105C161.954 309.518 161.853 308.996 161.65 308.537C161.458 308.078 161.181 307.721 160.818 307.465C160.466 307.209 160.056 307.081 159.586 307.081C159.128 307.081 158.717 307.204 158.354 307.449C157.992 307.684 157.709 308.03 157.506 308.489C157.314 308.948 157.218 309.481 157.218 310.089C157.218 310.686 157.32 311.214 157.522 311.673C157.725 312.132 158.002 312.489 158.354 312.745C158.717 313.001 159.128 313.129 159.586 313.129ZM165.266 302.761H166.642V313.961H165.266V302.761ZM165.266 302.761H165.954V303.897H165.266V302.761ZM165.266 312.825H166.642V313.961H165.266V312.825ZM169.016 306.249H170.392V313.961H169.016V306.249ZM169.016 312.825H170.392V313.961H169.016V312.825ZM169.016 306.249H169.704V307.385H169.016V306.249ZM168.904 303.145H170.504V304.793H168.904V303.145ZM176.094 314.201C175.379 314.201 174.729 314.046 174.142 313.737C173.566 313.428 173.107 312.964 172.766 312.345C172.435 311.726 172.27 310.974 172.27 310.089C172.27 309.289 172.441 308.58 172.782 307.961C173.123 307.342 173.587 306.862 174.174 306.521C174.771 306.169 175.433 305.993 176.158 305.993C176.766 305.993 177.315 306.11 177.806 306.345C178.297 306.58 178.691 306.91 178.99 307.337C179.289 307.764 179.465 308.265 179.518 308.841H178.094C178.03 308.318 177.822 307.897 177.47 307.577C177.129 307.246 176.681 307.081 176.126 307.081C175.646 307.081 175.219 307.214 174.846 307.481C174.483 307.737 174.201 308.094 173.998 308.553C173.795 309.012 173.694 309.524 173.694 310.089C173.694 310.697 173.795 311.23 173.998 311.689C174.201 312.148 174.489 312.505 174.862 312.761C175.235 313.006 175.667 313.129 176.158 313.129C176.723 313.129 177.187 312.974 177.55 312.665C177.913 312.356 178.131 311.924 178.206 311.369H179.566C179.513 311.934 179.342 312.43 179.054 312.857C178.777 313.284 178.387 313.614 177.886 313.849C177.385 314.084 176.787 314.201 176.094 314.201ZM190.069 314.201C189.003 314.201 188.064 313.966 187.253 313.497C186.453 313.017 185.829 312.334 185.381 311.449C184.933 310.553 184.709 309.502 184.709 308.297C184.709 307.156 184.939 306.148 185.397 305.273C185.867 304.388 186.512 303.705 187.333 303.225C188.155 302.745 189.077 302.505 190.101 302.505C190.987 302.505 191.776 302.676 192.469 303.017C193.163 303.348 193.717 303.806 194.133 304.393C194.549 304.98 194.795 305.641 194.869 306.377H193.269C193.12 305.545 192.768 304.9 192.213 304.441C191.659 303.972 190.933 303.737 190.037 303.737C189.28 303.737 188.613 303.924 188.037 304.297C187.472 304.66 187.029 305.188 186.709 305.881C186.4 306.564 186.245 307.369 186.245 308.297C186.245 309.225 186.405 310.046 186.725 310.761C187.045 311.465 187.493 312.009 188.069 312.393C188.645 312.777 189.301 312.969 190.037 312.969C190.944 312.969 191.685 312.734 192.261 312.265C192.837 311.796 193.205 311.156 193.365 310.345H194.885C194.789 311.134 194.528 311.822 194.101 312.409C193.675 312.985 193.115 313.428 192.421 313.737C191.728 314.046 190.944 314.201 190.069 314.201ZM200.046 314.201C199.31 314.201 198.654 314.03 198.078 313.689C197.502 313.348 197.054 312.868 196.734 312.249C196.414 311.62 196.254 310.9 196.254 310.089C196.254 309.3 196.414 308.596 196.734 307.977C197.054 307.348 197.502 306.862 198.078 306.521C198.654 306.169 199.31 305.993 200.046 305.993C200.772 305.993 201.422 306.169 201.998 306.521C202.574 306.862 203.022 307.348 203.342 307.977C203.673 308.596 203.838 309.3 203.838 310.089C203.838 310.9 203.673 311.62 203.342 312.249C203.022 312.868 202.574 313.348 201.998 313.689C201.422 314.03 200.772 314.201 200.046 314.201ZM200.046 313.129C200.526 313.129 200.942 313.001 201.294 312.745C201.657 312.489 201.934 312.132 202.126 311.673C202.318 311.214 202.414 310.686 202.414 310.089C202.414 309.182 202.196 308.457 201.758 307.913C201.332 307.358 200.761 307.081 200.046 307.081C199.577 307.081 199.161 307.209 198.798 307.465C198.436 307.71 198.158 308.062 197.966 308.521C197.774 308.969 197.678 309.492 197.678 310.089C197.678 311.006 197.892 311.742 198.318 312.297C198.745 312.852 199.321 313.129 200.046 313.129ZM205.704 306.249H207.08V306.857C207.08 306.996 207.08 307.14 207.08 307.289C207.325 306.894 207.64 306.58 208.024 306.345C208.418 306.11 208.856 305.993 209.336 305.993C209.858 305.993 210.317 306.121 210.712 306.377C211.117 306.633 211.432 307.012 211.656 307.513C211.933 307.044 212.285 306.676 212.712 306.409C213.149 306.132 213.634 305.993 214.168 305.993C214.701 305.993 215.17 306.105 215.576 306.329C215.981 306.553 216.296 306.9 216.52 307.369C216.754 307.828 216.872 308.398 216.872 309.081V313.961H215.496V309.353C215.496 308.596 215.368 308.03 215.112 307.657C214.866 307.273 214.456 307.081 213.88 307.081C213.485 307.081 213.144 307.188 212.856 307.401C212.568 307.604 212.349 307.881 212.2 308.233C212.05 308.574 211.976 308.953 211.976 309.369V313.961H210.6V309.401C210.6 308.644 210.472 308.068 210.216 307.673C209.97 307.278 209.57 307.081 209.016 307.081C208.632 307.081 208.29 307.188 207.992 307.401C207.704 307.614 207.48 307.902 207.32 308.265C207.16 308.617 207.08 309.006 207.08 309.433V313.961H205.704V306.249ZM219.157 306.249H220.533V306.809C220.533 306.969 220.533 307.134 220.533 307.305C220.767 306.942 221.114 306.633 221.573 306.377C222.031 306.121 222.533 305.993 223.077 305.993C223.802 305.993 224.431 306.169 224.965 306.521C225.509 306.873 225.919 307.358 226.197 307.977C226.485 308.596 226.629 309.3 226.629 310.089C226.629 310.9 226.479 311.614 226.181 312.233C225.882 312.852 225.461 313.337 224.917 313.689C224.373 314.03 223.749 314.201 223.045 314.201C222.501 314.201 222.01 314.084 221.573 313.849C221.135 313.614 220.789 313.294 220.533 312.889C220.533 313.102 220.533 313.316 220.533 313.529V317.289H219.157V306.249ZM222.837 313.129C223.306 313.129 223.717 313.001 224.069 312.745C224.431 312.489 224.709 312.132 224.901 311.673C225.093 311.214 225.189 310.686 225.189 310.089C225.189 309.502 225.093 308.985 224.901 308.537C224.709 308.078 224.431 307.721 224.069 307.465C223.717 307.209 223.306 307.081 222.837 307.081C222.378 307.081 221.967 307.204 221.605 307.449C221.242 307.694 220.959 308.046 220.757 308.505C220.554 308.953 220.453 309.481 220.453 310.089C220.453 310.686 220.554 311.214 220.757 311.673C220.959 312.132 221.237 312.489 221.589 312.745C221.951 313.001 222.367 313.129 222.837 313.129ZM230.692 314.201C230.202 314.201 229.754 314.105 229.348 313.913C228.943 313.721 228.623 313.449 228.388 313.097C228.154 312.734 228.036 312.318 228.036 311.849C228.036 311.156 228.271 310.612 228.74 310.217C229.22 309.822 229.839 309.566 230.596 309.449L232.244 309.193C232.532 309.15 232.735 309.07 232.852 308.953C232.97 308.836 233.028 308.66 233.028 308.425C233.028 308.009 232.884 307.684 232.596 307.449C232.308 307.204 231.935 307.081 231.476 307.081C230.9 307.081 230.458 307.225 230.148 307.513C229.839 307.79 229.674 308.174 229.652 308.665H228.276C228.298 308.185 228.431 307.742 228.676 307.337C228.922 306.932 229.274 306.606 229.732 306.361C230.202 306.116 230.746 305.993 231.364 305.993C231.994 305.993 232.532 306.11 232.98 306.345C233.439 306.58 233.786 306.916 234.02 307.353C234.255 307.79 234.372 308.308 234.372 308.905V313.961H233.06V313.577C233.06 313.353 233.06 313.134 233.06 312.921C232.868 313.326 232.564 313.641 232.148 313.865C231.743 314.089 231.258 314.201 230.692 314.201ZM230.884 313.129C231.29 313.129 231.652 313.044 231.972 312.873C232.303 312.692 232.559 312.446 232.74 312.137C232.932 311.817 233.028 311.454 233.028 311.049V309.913C232.986 309.988 232.89 310.052 232.74 310.105C232.602 310.158 232.415 310.206 232.18 310.249L231.06 310.457C230.57 310.553 230.18 310.713 229.892 310.937C229.604 311.161 229.46 311.465 229.46 311.849C229.46 312.233 229.594 312.542 229.86 312.777C230.138 313.012 230.479 313.129 230.884 313.129ZM236.641 306.249H238.001V306.777C238.001 306.948 238.001 307.118 238.001 307.289C238.225 306.926 238.556 306.622 238.993 306.377C239.43 306.121 239.894 305.993 240.385 305.993C240.972 305.993 241.478 306.116 241.905 306.361C242.332 306.596 242.657 306.948 242.881 307.417C243.116 307.886 243.233 308.446 243.233 309.097V313.961H241.857V309.273C241.857 308.526 241.724 307.977 241.457 307.625C241.19 307.262 240.758 307.081 240.161 307.081C239.724 307.081 239.34 307.182 239.009 307.385C238.689 307.588 238.444 307.86 238.273 308.201C238.102 308.542 238.017 308.916 238.017 309.321V313.961H236.641V306.249ZM245.516 306.249H246.892V313.961H245.516V306.249ZM245.516 312.825H246.892V313.961H245.516V312.825ZM245.516 306.249H246.204V307.385H245.516V306.249ZM245.404 303.145H247.004V304.793H245.404V303.145ZM252.514 314.201C251.746 314.201 251.079 314.041 250.514 313.721C249.959 313.401 249.527 312.932 249.218 312.313C248.919 311.694 248.77 310.948 248.77 310.073C248.77 309.294 248.925 308.596 249.234 307.977C249.554 307.358 249.991 306.873 250.546 306.521C251.111 306.169 251.741 305.993 252.434 305.993C253.191 305.993 253.837 306.164 254.37 306.505C254.903 306.836 255.309 307.31 255.586 307.929C255.863 308.537 256.002 309.257 256.002 310.089V310.361H250.146C250.157 310.937 250.263 311.433 250.466 311.849C250.679 312.265 250.962 312.585 251.314 312.809C251.677 313.022 252.082 313.129 252.53 313.129C253.053 313.129 253.501 313.012 253.874 312.777C254.247 312.532 254.477 312.132 254.562 311.577H255.922C255.869 312.057 255.709 312.494 255.442 312.889C255.175 313.284 254.791 313.604 254.29 313.849C253.799 314.084 253.207 314.201 252.514 314.201ZM254.53 309.385C254.53 308.681 254.343 308.121 253.97 307.705C253.607 307.289 253.095 307.081 252.434 307.081C251.805 307.081 251.287 307.3 250.882 307.737C250.477 308.174 250.247 308.724 250.194 309.385H254.53ZM260.595 314.201C259.912 314.201 259.326 314.084 258.835 313.849C258.344 313.614 257.966 313.289 257.699 312.873C257.432 312.457 257.294 311.972 257.283 311.417H258.627C258.648 311.95 258.83 312.372 259.171 312.681C259.523 312.98 260.003 313.129 260.611 313.129C261.144 313.129 261.571 313.017 261.891 312.793C262.222 312.558 262.387 312.249 262.387 311.865C262.387 311.556 262.275 311.305 262.051 311.113C261.838 310.91 261.502 310.766 261.043 310.681L259.875 310.457C259.139 310.318 258.563 310.062 258.147 309.689C257.731 309.316 257.523 308.841 257.523 308.265C257.523 307.828 257.651 307.438 257.907 307.097C258.163 306.756 258.515 306.489 258.963 306.297C259.422 306.094 259.939 305.993 260.515 305.993C261.134 305.993 261.667 306.094 262.115 306.297C262.563 306.489 262.91 306.772 263.155 307.145C263.411 307.508 263.555 307.95 263.587 308.473H262.227C262.174 308.014 261.987 307.668 261.667 307.433C261.358 307.198 260.942 307.081 260.419 307.081C259.96 307.081 259.592 307.182 259.315 307.385C259.038 307.588 258.899 307.854 258.899 308.185C258.899 308.484 259.006 308.718 259.219 308.889C259.432 309.06 259.763 309.188 260.211 309.273L261.411 309.497C262.147 309.636 262.718 309.886 263.123 310.249C263.539 310.612 263.747 311.102 263.747 311.721C263.747 312.18 263.619 312.601 263.363 312.985C263.107 313.358 262.739 313.657 262.259 313.881C261.79 314.094 261.235 314.201 260.595 314.201Z" fill="white"/>                            <defs>
                                <clipPath id="clip0_5_14214">
                                    <rect width="73.6249" height="200" fill="white" transform="translate(127.375 1.31641)" />
                                </clipPath>
                            </defs>
                        </svg>

                    <?php elseif ($figpie_type == 'private'): ?>

                        <svg width="402" height="402" viewBox="0 0 402 402" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M201.001 201.316L376.262 297.667C323.049 394.461 201.444 429.791 104.65 376.578C86.2589 366.467 69.5737 353.525 55.207 338.226L201.001 201.316Z" fill="#8559D7" stroke="#010035" />
                            <g clip-path="url(#clip0_5_14244)">
                                <path opacity="0.5" d="M201.501 3.40234L169.745 35.1582L170.452 35.8652L201.501 4.81641V11.4023L177.745 35.1582L178.452 35.8652L201.501 12.8164V19.4023L185.745 35.1582L186.452 35.8652L201.501 20.8164V201.316L200.536 201.5L138.215 44.1016L180.44 1.87598C182.835 1.62915 185.234 1.42522 187.638 1.26465L142.335 46.5684L143.042 47.2754L189.15 1.16602C191.438 1.03055 193.73 0.935874 196.023 0.878906L161.745 35.1582L162.452 35.8652L197.466 0.850586C198.644 0.829815 199.822 0.816406 201.001 0.816406H201.501V3.40234ZM137.814 43.0879L135.946 38.3701L171.282 3.03418C173.8 2.65682 176.325 2.32724 178.856 2.0459L137.814 43.0879ZM135.546 37.3564L133.678 32.6387L161.586 4.73047C164.251 4.19621 166.926 3.71754 169.61 3.29199L135.546 37.3564ZM133.277 31.625L131.409 26.9072L151.219 7.09766C154.066 6.36774 156.929 5.70142 159.805 5.09766L133.277 31.625ZM131.009 25.8936L129.141 21.1758L139.989 10.3271C143.074 9.34166 146.18 8.43072 149.306 7.59668L131.009 25.8936ZM128.739 20.1631L126.911 15.5449L126.727 15.0801L127.192 14.8965C130.726 13.4975 134.295 12.2022 137.894 11.0088L128.739 20.1631Z" fill="#34335D" />
                            </g>
                            <path d="M201.001 201.319L55.2069 338.228C-20.4061 257.708 -16.4285 131.138 64.0912 55.5249C82.4666 38.2692 103.938 24.6428 127.376 15.3633L201.001 201.319Z" fill="#34335D" stroke="#010035" />
                            <path d="M201 201.316V1.31641C311.457 1.31641 401 90.8595 401 201.316C401 235.004 392.491 268.146 376.261 297.667L201 201.316Z" fill="#34335D" stroke="#010035" />
                            <circle cx="200.991" cy="201.307" r="169.991" fill="#010035" stroke="#010035" stroke-width="2" />
                            <g class="button" @click="openModal(<?php echo $index; ?>)">

                                <g class="circle">
                                    <rect x="163.668" y="103.5" width="70" height="61" stroke="#010035" />
                                    <circle cx="198.668" cy="119" r="15.25" fill="#8559D7" stroke="#8559D7" stroke-width="1.5" />
                                    <rect width="16" height="16" transform="translate(190.668 111)" fill="#8559D7" />
                                    <path d="M198.668 114.332V123.665" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                    <path d="M194.004 119H203.337" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                </g>
                                <path d="M164.442 149.2H165.716V157.922H170.826V159H164.442V149.2ZM174.702 159.21C174.03 159.21 173.447 159.07 172.952 158.79C172.467 158.51 172.089 158.099 171.818 157.558C171.557 157.017 171.426 156.363 171.426 155.598C171.426 154.917 171.562 154.305 171.832 153.764C172.112 153.223 172.495 152.798 172.98 152.49C173.475 152.182 174.026 152.028 174.632 152.028C175.295 152.028 175.86 152.177 176.326 152.476C176.793 152.765 177.148 153.181 177.39 153.722C177.633 154.254 177.754 154.884 177.754 155.612V155.85H172.63C172.64 156.354 172.733 156.788 172.91 157.152C173.097 157.516 173.344 157.796 173.652 157.992C173.97 158.179 174.324 158.272 174.716 158.272C175.174 158.272 175.566 158.169 175.892 157.964C176.219 157.749 176.42 157.399 176.494 156.914H177.684C177.638 157.334 177.498 157.717 177.264 158.062C177.031 158.407 176.695 158.687 176.256 158.902C175.827 159.107 175.309 159.21 174.702 159.21ZM176.466 154.996C176.466 154.38 176.303 153.89 175.976 153.526C175.659 153.162 175.211 152.98 174.632 152.98C174.082 152.98 173.629 153.171 173.274 153.554C172.92 153.937 172.719 154.417 172.672 154.996H176.466ZM181.325 159.21C180.896 159.21 180.504 159.126 180.149 158.958C179.794 158.79 179.514 158.552 179.309 158.244C179.104 157.927 179.001 157.563 179.001 157.152C179.001 156.545 179.206 156.069 179.617 155.724C180.037 155.379 180.578 155.155 181.241 155.052L182.683 154.828C182.935 154.791 183.112 154.721 183.215 154.618C183.318 154.515 183.369 154.361 183.369 154.156C183.369 153.792 183.243 153.507 182.991 153.302C182.739 153.087 182.412 152.98 182.011 152.98C181.507 152.98 181.12 153.106 180.849 153.358C180.578 153.601 180.434 153.937 180.415 154.366H179.211C179.23 153.946 179.346 153.559 179.561 153.204C179.776 152.849 180.084 152.565 180.485 152.35C180.896 152.135 181.372 152.028 181.913 152.028C182.464 152.028 182.935 152.131 183.327 152.336C183.728 152.541 184.032 152.835 184.237 153.218C184.442 153.601 184.545 154.053 184.545 154.576V159H183.397V158.664C183.397 158.468 183.397 158.277 183.397 158.09C183.229 158.445 182.963 158.72 182.599 158.916C182.244 159.112 181.82 159.21 181.325 159.21ZM181.493 158.272C181.848 158.272 182.165 158.197 182.445 158.048C182.734 157.889 182.958 157.675 183.117 157.404C183.285 157.124 183.369 156.807 183.369 156.452V155.458C183.332 155.523 183.248 155.579 183.117 155.626C182.996 155.673 182.832 155.715 182.627 155.752L181.647 155.934C181.218 156.018 180.877 156.158 180.625 156.354C180.373 156.55 180.247 156.816 180.247 157.152C180.247 157.488 180.364 157.759 180.597 157.964C180.84 158.169 181.138 158.272 181.493 158.272ZM186.53 152.252H187.734V152.546C187.734 152.817 187.734 153.092 187.734 153.372C187.911 152.971 188.182 152.649 188.546 152.406C188.919 152.154 189.353 152.028 189.848 152.028C189.979 152.028 190.081 152.033 190.156 152.042V153.232C190.025 153.213 189.899 153.204 189.778 153.204C189.339 153.204 188.966 153.288 188.658 153.456C188.359 153.615 188.131 153.862 187.972 154.198C187.813 154.525 187.734 154.935 187.734 155.43V159H186.53V152.252ZM191.507 152.252H192.697V152.714C192.697 152.863 192.697 153.013 192.697 153.162C192.893 152.845 193.182 152.579 193.565 152.364C193.947 152.14 194.353 152.028 194.783 152.028C195.296 152.028 195.739 152.135 196.113 152.35C196.486 152.555 196.771 152.863 196.967 153.274C197.172 153.685 197.275 154.175 197.275 154.744V159H196.071V154.898C196.071 154.245 195.954 153.764 195.721 153.456C195.487 153.139 195.109 152.98 194.587 152.98C194.204 152.98 193.868 153.069 193.579 153.246C193.299 153.423 193.084 153.661 192.935 153.96C192.785 154.259 192.711 154.585 192.711 154.94V159H191.507V152.252ZM202.554 152.252H203.758V152.784C203.758 152.905 203.758 153.031 203.758 153.162C203.972 152.817 204.248 152.541 204.584 152.336C204.929 152.131 205.312 152.028 205.732 152.028C206.189 152.028 206.59 152.14 206.936 152.364C207.29 152.588 207.566 152.919 207.762 153.358C208.004 152.947 208.312 152.625 208.686 152.392C209.068 152.149 209.493 152.028 209.96 152.028C210.426 152.028 210.837 152.126 211.192 152.322C211.546 152.518 211.822 152.821 212.018 153.232C212.223 153.633 212.326 154.133 212.326 154.73V159H211.122V154.968C211.122 154.305 211.01 153.811 210.786 153.484C210.571 153.148 210.212 152.98 209.708 152.98C209.362 152.98 209.064 153.073 208.812 153.26C208.56 153.437 208.368 153.68 208.238 153.988C208.107 154.287 208.042 154.618 208.042 154.982V159H206.838V155.01C206.838 154.347 206.726 153.843 206.502 153.498C206.287 153.153 205.937 152.98 205.452 152.98C205.116 152.98 204.817 153.073 204.556 153.26C204.304 153.447 204.108 153.699 203.968 154.016C203.828 154.324 203.758 154.665 203.758 155.038V159H202.554V152.252ZM217.209 159.21C216.565 159.21 215.991 159.061 215.487 158.762C214.983 158.463 214.591 158.043 214.311 157.502C214.031 156.951 213.891 156.321 213.891 155.612C213.891 154.921 214.031 154.305 214.311 153.764C214.591 153.213 214.983 152.789 215.487 152.49C215.991 152.182 216.565 152.028 217.209 152.028C217.844 152.028 218.413 152.182 218.917 152.49C219.421 152.789 219.813 153.213 220.093 153.764C220.382 154.305 220.527 154.921 220.527 155.612C220.527 156.321 220.382 156.951 220.093 157.502C219.813 158.043 219.421 158.463 218.917 158.762C218.413 159.061 217.844 159.21 217.209 159.21ZM217.209 158.272C217.629 158.272 217.993 158.16 218.301 157.936C218.618 157.712 218.861 157.399 219.029 156.998C219.197 156.597 219.281 156.135 219.281 155.612C219.281 154.819 219.09 154.184 218.707 153.708C218.334 153.223 217.834 152.98 217.209 152.98C216.798 152.98 216.434 153.092 216.117 153.316C215.8 153.531 215.557 153.839 215.389 154.24C215.221 154.632 215.137 155.089 215.137 155.612C215.137 156.415 215.324 157.059 215.697 157.544C216.07 158.029 216.574 158.272 217.209 158.272ZM222.159 152.252H223.363V152.546C223.363 152.817 223.363 153.092 223.363 153.372C223.54 152.971 223.811 152.649 224.175 152.406C224.548 152.154 224.982 152.028 225.477 152.028C225.608 152.028 225.71 152.033 225.785 152.042V153.232C225.654 153.213 225.528 153.204 225.407 153.204C224.968 153.204 224.595 153.288 224.287 153.456C223.988 153.615 223.76 153.862 223.601 154.198C223.442 154.525 223.363 154.935 223.363 155.43V159H222.159V152.252ZM229.718 159.21C229.046 159.21 228.463 159.07 227.968 158.79C227.483 158.51 227.105 158.099 226.834 157.558C226.573 157.017 226.442 156.363 226.442 155.598C226.442 154.917 226.577 154.305 226.848 153.764C227.128 153.223 227.511 152.798 227.996 152.49C228.491 152.182 229.041 152.028 229.648 152.028C230.311 152.028 230.875 152.177 231.342 152.476C231.809 152.765 232.163 153.181 232.406 153.722C232.649 154.254 232.77 154.884 232.77 155.612V155.85H227.646C227.655 156.354 227.749 156.788 227.926 157.152C228.113 157.516 228.36 157.796 228.668 157.992C228.985 158.179 229.34 158.272 229.732 158.272C230.189 158.272 230.581 158.169 230.908 157.964C231.235 157.749 231.435 157.399 231.51 156.914H232.7C232.653 157.334 232.513 157.717 232.28 158.062C232.047 158.407 231.711 158.687 231.272 158.902C230.843 159.107 230.325 159.21 229.718 159.21ZM231.482 154.996C231.482 154.38 231.319 153.89 230.992 153.526C230.675 153.162 230.227 152.98 229.648 152.98C229.097 152.98 228.645 153.171 228.29 153.554C227.935 153.937 227.735 154.417 227.688 154.996H231.482Z" fill="white" />
                            </g>
                            <rect x="136.168" y="211" width="129" height="110.777" stroke="#010035" stroke-width="2" />
                            <path d="M161.837 266.952C152.261 266.952 146.157 261.016 145.653 251.384H148.453C148.845 259.448 153.773 264.096 161.053 264.096C168.221 264.096 171.749 259.728 171.749 254.296C171.749 248.36 167.997 244.664 159.877 244.664H155.453V242.368H159.821C166.653 242.368 170.685 238.56 170.685 233.184C170.685 229.04 168.221 225.12 161.725 225.12C155.117 225.12 151.141 229.096 150.357 235.76H145.933C146.885 228.032 153.045 222.824 162.285 222.824C170.853 222.824 175.445 227.304 175.445 233.072C175.445 238.56 171.245 242.256 164.861 243.264C171.805 244.048 176.733 247.912 176.733 254.52C176.733 261.24 171.245 266.952 161.837 266.952ZM197.763 266.896C188.075 266.896 182.251 258.832 182.251 244.832C182.251 230.776 188.075 222.824 197.763 222.824C207.507 222.824 213.331 230.832 213.331 244.888C213.331 258.888 207.507 266.896 197.763 266.896ZM187.235 244.888C187.235 258.16 191.099 264.544 197.763 264.544C204.483 264.544 208.403 258.16 208.403 244.888C208.403 231.56 204.483 225.176 197.763 225.176C191.099 225.176 187.235 231.56 187.235 244.888ZM219.839 266L251.647 223.608H254.503L222.639 266H219.839ZM218.103 231.896C218.103 226.688 221.911 223.048 227.175 223.048C232.495 223.048 236.303 226.688 236.303 231.896C236.303 237.104 232.495 240.8 227.175 240.8C221.911 240.8 218.103 237.104 218.103 231.896ZM221.519 231.896C221.519 236.32 223.647 239.008 227.175 239.008C230.703 239.008 232.887 236.32 232.887 231.896C232.887 227.528 230.703 224.84 227.175 224.84C223.647 224.84 221.519 227.528 221.519 231.896ZM237.927 257.712C237.927 252.448 241.679 248.808 246.999 248.808C252.263 248.808 256.071 252.448 256.071 257.712C256.071 262.864 252.263 266.616 246.999 266.616C241.679 266.616 237.927 262.864 237.927 257.712ZM241.343 257.712C241.343 262.08 243.415 264.768 246.999 264.768C250.527 264.768 252.655 262.08 252.655 257.712C252.655 253.288 250.527 250.6 246.999 250.6C243.415 250.6 241.343 253.288 241.343 257.712Z" fill="white" />
                            <path d="M187.587 282.2H189.505L194.475 290.558C194.475 290.147 194.475 289.737 194.475 289.326V282.2H195.763V292H193.985L188.861 283.432C188.861 283.824 188.861 284.221 188.861 284.622V292H187.587V282.2ZM201.035 282.2H202.575L206.509 292H205.095L202.057 284.104C202.029 284.029 202.001 283.955 201.973 283.88C201.908 283.703 201.843 283.53 201.777 283.362C201.74 283.474 201.707 283.558 201.679 283.614C201.661 283.67 201.633 283.754 201.595 283.866L201.497 284.104L198.459 292H197.115L201.035 282.2ZM199.369 288.024H204.171V289.088H199.369V288.024ZM205.962 282.2H207.362L209.98 289.326C210.092 289.606 210.199 289.891 210.302 290.18C210.358 290.329 210.414 290.479 210.47 290.628C210.517 290.488 210.596 290.278 210.708 289.998C210.792 289.774 210.876 289.55 210.96 289.326L213.578 282.2H214.936L211.142 292H209.672L205.962 282.2Z" fill="#CBD8FF" />
                            <path xmlns="http://www.w3.org/2000/svg" d="M150.147 302.761H154.515C155.23 302.761 155.87 302.862 156.435 303.065C157.011 303.257 157.475 303.593 157.827 304.073C158.179 304.542 158.355 305.166 158.355 305.945C158.355 306.713 158.185 307.337 157.843 307.817C157.502 308.286 157.043 308.622 156.467 308.825C155.902 309.017 155.251 309.113 154.515 309.113H151.603V313.961H150.147V302.761ZM154.499 307.897C155.321 307.897 155.918 307.726 156.291 307.385C156.675 307.044 156.867 306.564 156.867 305.945C156.867 305.316 156.675 304.83 156.291 304.489C155.918 304.148 155.321 303.977 154.499 303.977H151.603V307.897H154.499ZM159.907 306.249H161.283V306.585C161.283 306.894 161.283 307.209 161.283 307.529C161.485 307.07 161.795 306.702 162.211 306.425C162.637 306.137 163.133 305.993 163.699 305.993C163.848 305.993 163.965 305.998 164.051 306.009V307.369C163.901 307.348 163.757 307.337 163.619 307.337C163.117 307.337 162.691 307.433 162.339 307.625C161.997 307.806 161.736 308.089 161.555 308.473C161.373 308.846 161.283 309.316 161.283 309.881V313.961H159.907V306.249ZM165.594 306.249H166.97V313.961H165.594V306.249ZM165.594 312.825H166.97V313.961H165.594V312.825ZM165.594 306.249H166.282V307.385H165.594V306.249ZM165.482 303.145H167.082V304.793H165.482V303.145ZM168.368 306.249H169.872L171.84 311.833C171.925 312.078 172.011 312.329 172.096 312.585C172.181 312.329 172.267 312.078 172.352 311.833L174.272 306.249H175.712L172.784 313.961H171.328L168.368 306.249ZM179.177 314.201C178.686 314.201 178.238 314.105 177.833 313.913C177.427 313.721 177.107 313.449 176.873 313.097C176.638 312.734 176.521 312.318 176.521 311.849C176.521 311.156 176.755 310.612 177.225 310.217C177.705 309.822 178.323 309.566 179.081 309.449L180.729 309.193C181.017 309.15 181.219 309.07 181.337 308.953C181.454 308.836 181.513 308.66 181.513 308.425C181.513 308.009 181.369 307.684 181.081 307.449C180.793 307.204 180.419 307.081 179.961 307.081C179.385 307.081 178.942 307.225 178.633 307.513C178.323 307.79 178.158 308.174 178.137 308.665H176.761C176.782 308.185 176.915 307.742 177.161 307.337C177.406 306.932 177.758 306.606 178.217 306.361C178.686 306.116 179.23 305.993 179.849 305.993C180.478 305.993 181.017 306.11 181.465 306.345C181.923 306.58 182.27 306.916 182.505 307.353C182.739 307.79 182.857 308.308 182.857 308.905V313.961H181.545V313.577C181.545 313.353 181.545 313.134 181.545 312.921C181.353 313.326 181.049 313.641 180.633 313.865C180.227 314.089 179.742 314.201 179.177 314.201ZM179.369 313.129C179.774 313.129 180.137 313.044 180.457 312.873C180.787 312.692 181.043 312.446 181.225 312.137C181.417 311.817 181.513 311.454 181.513 311.049V309.913C181.47 309.988 181.374 310.052 181.225 310.105C181.086 310.158 180.899 310.206 180.665 310.249L179.545 310.457C179.054 310.553 178.665 310.713 178.377 310.937C178.089 311.161 177.945 311.465 177.945 311.849C177.945 312.233 178.078 312.542 178.345 312.777C178.622 313.012 178.963 313.129 179.369 313.129ZM187.815 314.089C187.175 314.089 186.647 313.913 186.231 313.561C185.825 313.198 185.623 312.617 185.623 311.817V307.385H184.183V306.249H185.623V303.705H186.999V306.249H188.599V307.385H186.999V311.673C186.999 312.1 187.095 312.404 187.287 312.585C187.489 312.766 187.772 312.857 188.135 312.857C188.295 312.857 188.487 312.841 188.711 312.809V313.993C188.572 314.025 188.428 314.046 188.279 314.057C188.129 314.078 187.975 314.089 187.815 314.089ZM193.577 314.201C192.809 314.201 192.142 314.041 191.577 313.721C191.022 313.401 190.59 312.932 190.281 312.313C189.982 311.694 189.833 310.948 189.833 310.073C189.833 309.294 189.987 308.596 190.297 307.977C190.617 307.358 191.054 306.873 191.609 306.521C192.174 306.169 192.803 305.993 193.497 305.993C194.254 305.993 194.899 306.164 195.433 306.505C195.966 306.836 196.371 307.31 196.649 307.929C196.926 308.537 197.065 309.257 197.065 310.089V310.361H191.209C191.219 310.937 191.326 311.433 191.529 311.849C191.742 312.265 192.025 312.585 192.377 312.809C192.739 313.022 193.145 313.129 193.593 313.129C194.115 313.129 194.563 313.012 194.937 312.777C195.31 312.532 195.539 312.132 195.625 311.577H196.985C196.931 312.057 196.771 312.494 196.505 312.889C196.238 313.284 195.854 313.604 195.353 313.849C194.862 314.084 194.27 314.201 193.577 314.201ZM195.593 309.385C195.593 308.681 195.406 308.121 195.033 307.705C194.67 307.289 194.158 307.081 193.497 307.081C192.867 307.081 192.35 307.3 191.945 307.737C191.539 308.174 191.31 308.724 191.257 309.385H195.593ZM207.648 314.201C206.581 314.201 205.642 313.966 204.832 313.497C204.032 313.017 203.408 312.334 202.96 311.449C202.512 310.553 202.288 309.502 202.288 308.297C202.288 307.156 202.517 306.148 202.976 305.273C203.445 304.388 204.09 303.705 204.912 303.225C205.733 302.745 206.656 302.505 207.68 302.505C208.565 302.505 209.354 302.676 210.048 303.017C210.741 303.348 211.296 303.806 211.712 304.393C212.128 304.98 212.373 305.641 212.448 306.377H210.848C210.698 305.545 210.346 304.9 209.792 304.441C209.237 303.972 208.512 303.737 207.616 303.737C206.858 303.737 206.192 303.924 205.616 304.297C205.05 304.66 204.608 305.188 204.288 305.881C203.978 306.564 203.824 307.369 203.824 308.297C203.824 309.225 203.984 310.046 204.304 310.761C204.624 311.465 205.072 312.009 205.648 312.393C206.224 312.777 206.88 312.969 207.616 312.969C208.522 312.969 209.264 312.734 209.84 312.265C210.416 311.796 210.784 311.156 210.944 310.345H212.464C212.368 311.134 212.106 311.822 211.68 312.409C211.253 312.985 210.693 313.428 210 313.737C209.306 314.046 208.522 314.201 207.648 314.201ZM216.521 314.201C216.03 314.201 215.582 314.105 215.177 313.913C214.771 313.721 214.451 313.449 214.217 313.097C213.982 312.734 213.865 312.318 213.865 311.849C213.865 311.156 214.099 310.612 214.569 310.217C215.049 309.822 215.667 309.566 216.425 309.449L218.073 309.193C218.361 309.15 218.563 309.07 218.681 308.953C218.798 308.836 218.857 308.66 218.857 308.425C218.857 308.009 218.713 307.684 218.425 307.449C218.137 307.204 217.763 307.081 217.305 307.081C216.729 307.081 216.286 307.225 215.977 307.513C215.667 307.79 215.502 308.174 215.481 308.665H214.105C214.126 308.185 214.259 307.742 214.505 307.337C214.75 306.932 215.102 306.606 215.561 306.361C216.03 306.116 216.574 305.993 217.193 305.993C217.822 305.993 218.361 306.11 218.809 306.345C219.267 306.58 219.614 306.916 219.849 307.353C220.083 307.79 220.201 308.308 220.201 308.905V313.961H218.889V313.577C218.889 313.353 218.889 313.134 218.889 312.921C218.697 313.326 218.393 313.641 217.977 313.865C217.571 314.089 217.086 314.201 216.521 314.201ZM216.713 313.129C217.118 313.129 217.481 313.044 217.801 312.873C218.131 312.692 218.387 312.446 218.569 312.137C218.761 311.817 218.857 311.454 218.857 311.049V309.913C218.814 309.988 218.718 310.052 218.569 310.105C218.43 310.158 218.243 310.206 218.009 310.249L216.889 310.457C216.398 310.553 216.009 310.713 215.721 310.937C215.433 311.161 215.289 311.465 215.289 311.849C215.289 312.233 215.422 312.542 215.689 312.777C215.966 313.012 216.307 313.129 216.713 313.129ZM222.469 306.249H223.845V306.809C223.845 306.969 223.845 307.134 223.845 307.305C224.08 306.942 224.426 306.633 224.885 306.377C225.344 306.121 225.845 305.993 226.389 305.993C227.114 305.993 227.744 306.169 228.277 306.521C228.821 306.873 229.232 307.358 229.509 307.977C229.797 308.596 229.941 309.3 229.941 310.089C229.941 310.9 229.792 311.614 229.493 312.233C229.194 312.852 228.773 313.337 228.229 313.689C227.685 314.03 227.061 314.201 226.357 314.201C225.813 314.201 225.322 314.084 224.885 313.849C224.448 313.614 224.101 313.294 223.845 312.889C223.845 313.102 223.845 313.316 223.845 313.529V317.289H222.469V306.249ZM226.149 313.129C226.618 313.129 227.029 313.001 227.381 312.745C227.744 312.489 228.021 312.132 228.213 311.673C228.405 311.214 228.501 310.686 228.501 310.089C228.501 309.502 228.405 308.985 228.213 308.537C228.021 308.078 227.744 307.721 227.381 307.465C227.029 307.209 226.618 307.081 226.149 307.081C225.69 307.081 225.28 307.204 224.917 307.449C224.554 307.694 224.272 308.046 224.069 308.505C223.866 308.953 223.765 309.481 223.765 310.089C223.765 310.686 223.866 311.214 224.069 311.673C224.272 312.132 224.549 312.489 224.901 312.745C225.264 313.001 225.68 313.129 226.149 313.129ZM231.813 306.249H233.189V313.961H231.813V306.249ZM231.813 312.825H233.189V313.961H231.813V312.825ZM231.813 306.249H232.501V307.385H231.813V306.249ZM231.701 303.145H233.301V304.793H231.701V303.145ZM238.299 314.089C237.659 314.089 237.131 313.913 236.715 313.561C236.31 313.198 236.107 312.617 236.107 311.817V307.385H234.667V306.249H236.107V303.705H237.483V306.249H239.083V307.385H237.483V311.673C237.483 312.1 237.579 312.404 237.771 312.585C237.974 312.766 238.256 312.857 238.619 312.857C238.779 312.857 238.971 312.841 239.195 312.809V313.993C239.056 314.025 238.912 314.046 238.763 314.057C238.614 314.078 238.459 314.089 238.299 314.089ZM243.13 314.201C242.639 314.201 242.191 314.105 241.786 313.913C241.381 313.721 241.061 313.449 240.826 313.097C240.591 312.734 240.474 312.318 240.474 311.849C240.474 311.156 240.709 310.612 241.178 310.217C241.658 309.822 242.277 309.566 243.034 309.449L244.682 309.193C244.97 309.15 245.173 309.07 245.29 308.953C245.407 308.836 245.466 308.66 245.466 308.425C245.466 308.009 245.322 307.684 245.034 307.449C244.746 307.204 244.373 307.081 243.914 307.081C243.338 307.081 242.895 307.225 242.586 307.513C242.277 307.79 242.111 308.174 242.09 308.665H240.714C240.735 308.185 240.869 307.742 241.114 307.337C241.359 306.932 241.711 306.606 242.17 306.361C242.639 306.116 243.183 305.993 243.802 305.993C244.431 305.993 244.97 306.11 245.418 306.345C245.877 306.58 246.223 306.916 246.458 307.353C246.693 307.79 246.81 308.308 246.81 308.905V313.961H245.498V313.577C245.498 313.353 245.498 313.134 245.498 312.921C245.306 313.326 245.002 313.641 244.586 313.865C244.181 314.089 243.695 314.201 243.13 314.201ZM243.322 313.129C243.727 313.129 244.09 313.044 244.41 312.873C244.741 312.692 244.997 312.446 245.178 312.137C245.37 311.817 245.466 311.454 245.466 311.049V309.913C245.423 309.988 245.327 310.052 245.178 310.105C245.039 310.158 244.853 310.206 244.618 310.249L243.498 310.457C243.007 310.553 242.618 310.713 242.33 310.937C242.042 311.161 241.898 311.465 241.898 311.849C241.898 312.233 242.031 312.542 242.298 312.777C242.575 313.012 242.917 313.129 243.322 313.129ZM249.079 302.761H250.455V313.961H249.079V302.761ZM249.079 302.761H249.767V303.897H249.079V302.761ZM249.079 312.825H250.455V313.961H249.079V312.825Z" fill="white" />
                            <defs>
                                <clipPath id="clip0_5_14244">
                                    <rect width="73.6249" height="200" fill="white" transform="translate(127.375 1.31641)" />
                                </clipPath>
                            </defs>
                        </svg>

                    <?php elseif ($figpie_type == 'funds'): ?>

                        <svg width="402" height="402" viewBox="0 0 402 402" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M201.001 201.316L376.262 297.667C323.049 394.461 201.444 429.791 104.65 376.578C86.2589 366.467 69.5737 353.525 55.207 338.226L201.001 201.316Z" fill="#34335D" stroke="#010035" />
                            <g clip-path="url(#clip0_5_14288)">
                                <path opacity="0.5" d="M201.501 3.40234L169.745 35.1582L170.452 35.8652L201.501 4.81641V11.4023L177.745 35.1582L178.452 35.8652L201.501 12.8164V19.4023L185.745 35.1582L186.452 35.8652L201.501 20.8164V201.316L200.536 201.5L138.215 44.1016L180.44 1.87598C182.835 1.62915 185.234 1.42522 187.638 1.26465L142.335 46.5684L143.042 47.2754L189.15 1.16602C191.438 1.03055 193.73 0.935874 196.023 0.878906L161.745 35.1582L162.452 35.8652L197.466 0.850586C198.644 0.829815 199.822 0.816406 201.001 0.816406H201.501V3.40234ZM137.814 43.0879L135.946 38.3701L171.282 3.03418C173.8 2.65682 176.325 2.32724 178.856 2.0459L137.814 43.0879ZM135.546 37.3564L133.678 32.6387L161.586 4.73047C164.251 4.19621 166.926 3.71754 169.61 3.29199L135.546 37.3564ZM133.277 31.625L131.409 26.9072L151.219 7.09766C154.066 6.36774 156.929 5.70142 159.805 5.09766L133.277 31.625ZM131.009 25.8936L129.141 21.1758L139.989 10.3271C143.074 9.34166 146.18 8.43072 149.306 7.59668L131.009 25.8936ZM128.739 20.1631L126.911 15.5449L126.727 15.0801L127.192 14.8965C130.726 13.4975 134.295 12.2022 137.894 11.0088L128.739 20.1631Z" fill="#34335D" />
                            </g>
                            <path d="M201.001 201.319L55.2069 338.228C-20.4061 257.708 -16.4285 131.138 64.0912 55.5249C82.4666 38.2692 103.938 24.6428 127.376 15.3633L201.001 201.319Z" fill="#5FAFD0" stroke="#010035" />
                            <path d="M201 201.316V1.31641C311.457 1.31641 401 90.8595 401 201.316C401 235.004 392.491 268.146 376.261 297.667L201 201.316Z" fill="#34335D" stroke="#010035" />
                            <circle cx="200.991" cy="201.307" r="169.991" fill="#010035" stroke="#010035" stroke-width="2" />
                            <g class="button" @click="openModal(<?php echo $index; ?>)">
                                <g class="circle">
                                    <rect x="163.668" y="103.5" width="70" height="61" stroke="#010035" />
                                    <circle cx="198.668" cy="119" r="15.25" fill="#5FAFD0" stroke="#5FAFD0" stroke-width="1.5" />
                                    <rect width="16" height="16" transform="translate(190.668 111)" fill="#5FAFD0" />
                                    <path d="M198.668 114.332V123.665" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                    <path d="M194.004 119H203.337" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                </g>
                                <path d="M164.442 149.2H165.716V157.922H170.826V159H164.442V149.2ZM174.702 159.21C174.03 159.21 173.447 159.07 172.952 158.79C172.467 158.51 172.089 158.099 171.818 157.558C171.557 157.017 171.426 156.363 171.426 155.598C171.426 154.917 171.562 154.305 171.832 153.764C172.112 153.223 172.495 152.798 172.98 152.49C173.475 152.182 174.026 152.028 174.632 152.028C175.295 152.028 175.86 152.177 176.326 152.476C176.793 152.765 177.148 153.181 177.39 153.722C177.633 154.254 177.754 154.884 177.754 155.612V155.85H172.63C172.64 156.354 172.733 156.788 172.91 157.152C173.097 157.516 173.344 157.796 173.652 157.992C173.97 158.179 174.324 158.272 174.716 158.272C175.174 158.272 175.566 158.169 175.892 157.964C176.219 157.749 176.42 157.399 176.494 156.914H177.684C177.638 157.334 177.498 157.717 177.264 158.062C177.031 158.407 176.695 158.687 176.256 158.902C175.827 159.107 175.309 159.21 174.702 159.21ZM176.466 154.996C176.466 154.38 176.303 153.89 175.976 153.526C175.659 153.162 175.211 152.98 174.632 152.98C174.082 152.98 173.629 153.171 173.274 153.554C172.92 153.937 172.719 154.417 172.672 154.996H176.466ZM181.325 159.21C180.896 159.21 180.504 159.126 180.149 158.958C179.794 158.79 179.514 158.552 179.309 158.244C179.104 157.927 179.001 157.563 179.001 157.152C179.001 156.545 179.206 156.069 179.617 155.724C180.037 155.379 180.578 155.155 181.241 155.052L182.683 154.828C182.935 154.791 183.112 154.721 183.215 154.618C183.318 154.515 183.369 154.361 183.369 154.156C183.369 153.792 183.243 153.507 182.991 153.302C182.739 153.087 182.412 152.98 182.011 152.98C181.507 152.98 181.12 153.106 180.849 153.358C180.578 153.601 180.434 153.937 180.415 154.366H179.211C179.23 153.946 179.346 153.559 179.561 153.204C179.776 152.849 180.084 152.565 180.485 152.35C180.896 152.135 181.372 152.028 181.913 152.028C182.464 152.028 182.935 152.131 183.327 152.336C183.728 152.541 184.032 152.835 184.237 153.218C184.442 153.601 184.545 154.053 184.545 154.576V159H183.397V158.664C183.397 158.468 183.397 158.277 183.397 158.09C183.229 158.445 182.963 158.72 182.599 158.916C182.244 159.112 181.82 159.21 181.325 159.21ZM181.493 158.272C181.848 158.272 182.165 158.197 182.445 158.048C182.734 157.889 182.958 157.675 183.117 157.404C183.285 157.124 183.369 156.807 183.369 156.452V155.458C183.332 155.523 183.248 155.579 183.117 155.626C182.996 155.673 182.832 155.715 182.627 155.752L181.647 155.934C181.218 156.018 180.877 156.158 180.625 156.354C180.373 156.55 180.247 156.816 180.247 157.152C180.247 157.488 180.364 157.759 180.597 157.964C180.84 158.169 181.138 158.272 181.493 158.272ZM186.53 152.252H187.734V152.546C187.734 152.817 187.734 153.092 187.734 153.372C187.911 152.971 188.182 152.649 188.546 152.406C188.919 152.154 189.353 152.028 189.848 152.028C189.979 152.028 190.081 152.033 190.156 152.042V153.232C190.025 153.213 189.899 153.204 189.778 153.204C189.339 153.204 188.966 153.288 188.658 153.456C188.359 153.615 188.131 153.862 187.972 154.198C187.813 154.525 187.734 154.935 187.734 155.43V159H186.53V152.252ZM191.507 152.252H192.697V152.714C192.697 152.863 192.697 153.013 192.697 153.162C192.893 152.845 193.182 152.579 193.565 152.364C193.947 152.14 194.353 152.028 194.783 152.028C195.296 152.028 195.739 152.135 196.113 152.35C196.486 152.555 196.771 152.863 196.967 153.274C197.172 153.685 197.275 154.175 197.275 154.744V159H196.071V154.898C196.071 154.245 195.954 153.764 195.721 153.456C195.487 153.139 195.109 152.98 194.587 152.98C194.204 152.98 193.868 153.069 193.579 153.246C193.299 153.423 193.084 153.661 192.935 153.96C192.785 154.259 192.711 154.585 192.711 154.94V159H191.507V152.252ZM202.554 152.252H203.758V152.784C203.758 152.905 203.758 153.031 203.758 153.162C203.972 152.817 204.248 152.541 204.584 152.336C204.929 152.131 205.312 152.028 205.732 152.028C206.189 152.028 206.59 152.14 206.936 152.364C207.29 152.588 207.566 152.919 207.762 153.358C208.004 152.947 208.312 152.625 208.686 152.392C209.068 152.149 209.493 152.028 209.96 152.028C210.426 152.028 210.837 152.126 211.192 152.322C211.546 152.518 211.822 152.821 212.018 153.232C212.223 153.633 212.326 154.133 212.326 154.73V159H211.122V154.968C211.122 154.305 211.01 153.811 210.786 153.484C210.571 153.148 210.212 152.98 209.708 152.98C209.362 152.98 209.064 153.073 208.812 153.26C208.56 153.437 208.368 153.68 208.238 153.988C208.107 154.287 208.042 154.618 208.042 154.982V159H206.838V155.01C206.838 154.347 206.726 153.843 206.502 153.498C206.287 153.153 205.937 152.98 205.452 152.98C205.116 152.98 204.817 153.073 204.556 153.26C204.304 153.447 204.108 153.699 203.968 154.016C203.828 154.324 203.758 154.665 203.758 155.038V159H202.554V152.252ZM217.209 159.21C216.565 159.21 215.991 159.061 215.487 158.762C214.983 158.463 214.591 158.043 214.311 157.502C214.031 156.951 213.891 156.321 213.891 155.612C213.891 154.921 214.031 154.305 214.311 153.764C214.591 153.213 214.983 152.789 215.487 152.49C215.991 152.182 216.565 152.028 217.209 152.028C217.844 152.028 218.413 152.182 218.917 152.49C219.421 152.789 219.813 153.213 220.093 153.764C220.382 154.305 220.527 154.921 220.527 155.612C220.527 156.321 220.382 156.951 220.093 157.502C219.813 158.043 219.421 158.463 218.917 158.762C218.413 159.061 217.844 159.21 217.209 159.21ZM217.209 158.272C217.629 158.272 217.993 158.16 218.301 157.936C218.618 157.712 218.861 157.399 219.029 156.998C219.197 156.597 219.281 156.135 219.281 155.612C219.281 154.819 219.09 154.184 218.707 153.708C218.334 153.223 217.834 152.98 217.209 152.98C216.798 152.98 216.434 153.092 216.117 153.316C215.8 153.531 215.557 153.839 215.389 154.24C215.221 154.632 215.137 155.089 215.137 155.612C215.137 156.415 215.324 157.059 215.697 157.544C216.07 158.029 216.574 158.272 217.209 158.272ZM222.159 152.252H223.363V152.546C223.363 152.817 223.363 153.092 223.363 153.372C223.54 152.971 223.811 152.649 224.175 152.406C224.548 152.154 224.982 152.028 225.477 152.028C225.608 152.028 225.71 152.033 225.785 152.042V153.232C225.654 153.213 225.528 153.204 225.407 153.204C224.968 153.204 224.595 153.288 224.287 153.456C223.988 153.615 223.76 153.862 223.601 154.198C223.442 154.525 223.363 154.935 223.363 155.43V159H222.159V152.252ZM229.718 159.21C229.046 159.21 228.463 159.07 227.968 158.79C227.483 158.51 227.105 158.099 226.834 157.558C226.573 157.017 226.442 156.363 226.442 155.598C226.442 154.917 226.577 154.305 226.848 153.764C227.128 153.223 227.511 152.798 227.996 152.49C228.491 152.182 229.041 152.028 229.648 152.028C230.311 152.028 230.875 152.177 231.342 152.476C231.809 152.765 232.163 153.181 232.406 153.722C232.649 154.254 232.77 154.884 232.77 155.612V155.85H227.646C227.655 156.354 227.749 156.788 227.926 157.152C228.113 157.516 228.36 157.796 228.668 157.992C228.985 158.179 229.34 158.272 229.732 158.272C230.189 158.272 230.581 158.169 230.908 157.964C231.235 157.749 231.435 157.399 231.51 156.914H232.7C232.653 157.334 232.513 157.717 232.28 158.062C232.047 158.407 231.711 158.687 231.272 158.902C230.843 159.107 230.325 159.21 229.718 159.21ZM231.482 154.996C231.482 154.38 231.319 153.89 230.992 153.526C230.675 153.162 230.227 152.98 229.648 152.98C229.097 152.98 228.645 153.171 228.29 153.554C227.935 153.937 227.735 154.417 227.688 154.996H231.482Z" fill="white" />
                            </g>
                            <rect x="136.168" y="211" width="129" height="110.777" stroke="#010035" stroke-width="2" />
                            <path d="M169.028 266.952C159.452 266.952 153.348 261.016 152.844 251.384H155.644C156.036 259.448 160.964 264.096 168.244 264.096C175.412 264.096 178.94 259.728 178.94 254.296C178.94 248.36 175.188 244.664 167.068 244.664H162.644V242.368H167.012C173.844 242.368 177.876 238.56 177.876 233.184C177.876 229.04 175.412 225.12 168.916 225.12C162.308 225.12 158.332 229.096 157.548 235.76H153.124C154.076 228.032 160.236 222.824 169.476 222.824C178.044 222.824 182.636 227.304 182.636 233.072C182.636 238.56 178.436 242.256 172.052 243.264C178.996 244.048 183.924 247.912 183.924 254.52C183.924 261.24 178.436 266.952 169.028 266.952ZM195.098 266V265.832C197.618 264.488 197.954 262.696 197.954 258.776V230.496C196.666 233.408 193.194 237.216 188.266 237.72V234.192C194.874 233.24 199.13 227.584 199.97 223.328H202.882V258.888C202.882 262.752 203.162 264.488 205.57 265.832V266H195.098ZM212.648 266L244.456 223.608H247.312L215.448 266H212.648ZM210.912 231.896C210.912 226.688 214.72 223.048 219.984 223.048C225.304 223.048 229.112 226.688 229.112 231.896C229.112 237.104 225.304 240.8 219.984 240.8C214.72 240.8 210.912 237.104 210.912 231.896ZM214.328 231.896C214.328 236.32 216.456 239.008 219.984 239.008C223.512 239.008 225.696 236.32 225.696 231.896C225.696 227.528 223.512 224.84 219.984 224.84C216.456 224.84 214.328 227.528 214.328 231.896ZM230.736 257.712C230.736 252.448 234.488 248.808 239.808 248.808C245.072 248.808 248.88 252.448 248.88 257.712C248.88 262.864 245.072 266.616 239.808 266.616C234.488 266.616 230.736 262.864 230.736 257.712ZM234.152 257.712C234.152 262.08 236.224 264.768 239.808 264.768C243.336 264.768 245.464 262.08 245.464 257.712C245.464 253.288 243.336 250.6 239.808 250.6C236.224 250.6 234.152 253.288 234.152 257.712Z" fill="white" />
                            <path d="M187.587 282.2H189.505L194.475 290.558C194.475 290.147 194.475 289.737 194.475 289.326V282.2H195.763V292H193.985L188.861 283.432C188.861 283.824 188.861 284.221 188.861 284.622V292H187.587V282.2ZM201.035 282.2H202.575L206.509 292H205.095L202.057 284.104C202.029 284.029 202.001 283.955 201.973 283.88C201.908 283.703 201.843 283.53 201.777 283.362C201.74 283.474 201.707 283.558 201.679 283.614C201.661 283.67 201.633 283.754 201.595 283.866L201.497 284.104L198.459 292H197.115L201.035 282.2ZM199.369 288.024H204.171V289.088H199.369V288.024ZM205.962 282.2H207.362L209.98 289.326C210.092 289.606 210.199 289.891 210.302 290.18C210.358 290.329 210.414 290.479 210.47 290.628C210.517 290.488 210.596 290.278 210.708 289.998C210.792 289.774 210.876 289.55 210.96 289.326L213.578 282.2H214.936L211.142 292H209.672L205.962 282.2Z" fill="#CBD8FF" />
                            <path d="M180.249 303.577H187.545V304.793H181.705V308.457H187.273V309.689H181.705V314.777H180.249V303.577ZM191.806 315.017C191.209 315.017 190.702 314.9 190.286 314.665C189.87 314.431 189.555 314.089 189.342 313.641C189.129 313.183 189.022 312.628 189.022 311.977V307.065H190.398V311.689C190.398 312.447 190.537 313.012 190.814 313.385C191.091 313.759 191.539 313.945 192.158 313.945C192.574 313.945 192.926 313.844 193.214 313.641C193.513 313.428 193.737 313.129 193.886 312.745C194.046 312.351 194.126 311.876 194.126 311.321V307.065H195.486V314.777H194.142V314.313C194.142 314.153 194.142 313.999 194.142 313.849V313.705C193.961 314.111 193.657 314.431 193.23 314.665C192.803 314.9 192.329 315.017 191.806 315.017ZM197.852 307.065H199.212V307.593C199.212 307.764 199.212 307.935 199.212 308.105C199.436 307.743 199.767 307.439 200.204 307.193C200.641 306.937 201.105 306.809 201.596 306.809C202.183 306.809 202.689 306.932 203.116 307.177C203.543 307.412 203.868 307.764 204.092 308.233C204.327 308.703 204.444 309.263 204.444 309.913V314.777H203.068V310.089C203.068 309.343 202.935 308.793 202.668 308.441C202.401 308.079 201.969 307.897 201.372 307.897C200.935 307.897 200.551 307.999 200.22 308.201C199.9 308.404 199.655 308.676 199.484 309.017C199.313 309.359 199.228 309.732 199.228 310.137V314.777H197.852V307.065ZM209.783 315.017C209.1 315.017 208.492 314.857 207.959 314.537C207.426 314.217 207.004 313.748 206.695 313.129C206.386 312.511 206.231 311.775 206.231 310.921C206.231 310.143 206.375 309.444 206.663 308.825C206.962 308.196 207.383 307.705 207.927 307.353C208.471 306.991 209.1 306.809 209.815 306.809C210.402 306.809 210.908 306.943 211.335 307.209C211.772 307.465 212.092 307.764 212.295 308.105C212.295 307.892 212.295 307.684 212.295 307.481V303.577H213.671V314.777H212.295V314.329C212.295 314.116 212.295 313.908 212.295 313.705C212.082 314.079 211.746 314.393 211.287 314.649C210.839 314.895 210.338 315.017 209.783 315.017ZM210.023 313.945C210.482 313.945 210.887 313.823 211.239 313.577C211.602 313.321 211.884 312.964 212.087 312.505C212.29 312.047 212.391 311.513 212.391 310.905C212.391 309.999 212.172 309.273 211.735 308.729C211.298 308.175 210.727 307.897 210.023 307.897C209.564 307.897 209.154 308.025 208.791 308.281C208.439 308.527 208.162 308.879 207.959 309.337C207.756 309.796 207.655 310.324 207.655 310.921C207.655 311.519 207.751 312.047 207.943 312.505C208.146 312.964 208.423 313.321 208.775 313.577C209.138 313.823 209.554 313.945 210.023 313.945ZM218.743 315.017C218.061 315.017 217.474 314.9 216.983 314.665C216.493 314.431 216.114 314.105 215.847 313.689C215.581 313.273 215.442 312.788 215.431 312.233H216.775C216.797 312.767 216.978 313.188 217.319 313.497C217.671 313.796 218.151 313.945 218.759 313.945C219.293 313.945 219.719 313.833 220.039 313.609C220.37 313.375 220.535 313.065 220.535 312.681C220.535 312.372 220.423 312.121 220.199 311.929C219.986 311.727 219.65 311.583 219.191 311.497L218.023 311.273C217.287 311.135 216.711 310.879 216.295 310.505C215.879 310.132 215.671 309.657 215.671 309.081C215.671 308.644 215.799 308.255 216.055 307.913C216.311 307.572 216.663 307.305 217.111 307.113C217.57 306.911 218.087 306.809 218.663 306.809C219.282 306.809 219.815 306.911 220.263 307.113C220.711 307.305 221.058 307.588 221.303 307.961C221.559 308.324 221.703 308.767 221.735 309.289H220.375C220.322 308.831 220.135 308.484 219.815 308.249C219.506 308.015 219.09 307.897 218.567 307.897C218.109 307.897 217.741 307.999 217.463 308.201C217.186 308.404 217.047 308.671 217.047 309.001C217.047 309.3 217.154 309.535 217.367 309.705C217.581 309.876 217.911 310.004 218.359 310.089L219.559 310.313C220.295 310.452 220.866 310.703 221.271 311.065C221.687 311.428 221.895 311.919 221.895 312.537C221.895 312.996 221.767 313.417 221.511 313.801C221.255 314.175 220.887 314.473 220.407 314.697C219.938 314.911 219.383 315.017 218.743 315.017Z" fill="white" />
                            <defs>
                                <clipPath id="clip0_5_14288">
                                    <rect width="73.6249" height="200" fill="white" transform="translate(127.375 1.31641)" />
                                </clipPath>
                            </defs>
                        </svg>

                    <?php endif; ?>

                </div>


        <?php
                $index++;
            endwhile;

        endif;

        ?>

        <!-- Modal -->
        <div id="figpie__modal"
            class="modal"
            x-transition
            x-ref="modal"
            :class="{ 'active': isModalOpen }"
            @keydown.escape.window="closeModal()"
            @keydown.window="handleKeyNavigation"
            @click.self="closeModal()">
            <div class="modal-inner">

                <div class="modal-close-wrapper">
                    <button id="close" class="modal-close" @click="closeModal()">Ã—</button>
                </div>

                <div class="modal-content">

                    <div class="title">

                        <div class="modal-heading">
                            <h3 x-text="currentProject.title"></h3>
                            <p x-html="currentProject.content"></p>
                        </div>

                        <div class="modal-stats" x-show="currentProject.stats && currentProject.stats.length">
                            <template x-for="item in currentProject.stats" :key="item.label">
                                <div class="stat">
                                    <h3 x-text="item.value"></h3>
                                    <span x-text="item.label"></span>
                                </div>
                            </template>
                        </div>

                    </div>

                    <div class="modal-controls">
                        <div class="modal-nav">
                            <button class="next" :disabled="modalIndex === projects.length - 1" @click="next()">
                                <span>Next</span>
                                <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path opacity="0.1" d="M20 0.5C30.7696 0.5 39.5 9.23045 39.5 20C39.5 30.7696 30.7696 39.5 20 39.5C9.23045 39.5 0.5 30.7696 0.5 20C0.5 9.23045 9.23045 0.5 20 0.5Z" fill="white" stroke="#010035" />
                                    <path d="M15.332 20.2227H24.6654" stroke="#010035" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round" />
                                    <path d="M20 15.556L24.6667 20.2227L20 24.8894" stroke="#010035" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>

                            </button>
                            <button class="prev" :disabled="modalIndex === 0" @click="prev()">
                                <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path opacity="0.1" d="M20 0.5C9.23045 0.5 0.5 9.23045 0.5 20C0.5 30.7696 9.23045 39.5 20 39.5C30.7696 39.5 39.5 30.7696 39.5 20C39.5 9.23045 30.7696 0.5 20 0.5Z" fill="white" stroke="#010035" />
                                    <path d="M24.668 20.2227H15.3346" stroke="#010035" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round" />
                                    <path d="M20 15.556L15.3333 20.2227L20 24.8894" stroke="#010035" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                <span>Prev</span>
                            </button>
                        </div>
                    </div>

                </div>
            </div>
        </div>

    </div>

    <div class="legend">

        <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_5_14280)">
                <path d="M16.5732 6.15625C16.8489 6.99327 17 7.8871 17 8.81641C17 13.5108 13.1944 17.3164 8.5 17.3164C7.57069 17.3164 6.67686 17.1653 5.83984 16.8896L16.5732 6.15625ZM14.7119 3.01758C15.2988 3.64606 15.793 4.36227 16.1689 5.14648L5 16.3164L5.42285 16.7393C4.40607 16.3441 3.48459 15.76 2.70117 15.0283L14.7119 3.01758ZM11.7637 0.96582C12.577 1.30435 13.3258 1.7663 13.9883 2.32715L2.01074 14.3047C1.4499 13.6422 0.987939 12.8935 0.649414 12.0801L11.7637 0.96582ZM8.5 0.316406C9.26384 0.316406 10.0038 0.418478 10.708 0.607422L0.291016 11.0244C0.102072 10.3202 0 9.58025 0 8.81641C0 4.12199 3.80558 0.316406 8.5 0.316406Z" fill="#34335D" />
            </g>
            <defs>
                <clipPath id="clip0_5_14280">
                    <rect x="0.5" y="0.816406" width="16" height="16" rx="8" fill="white" />
                </clipPath>
            </defs>
        </svg>

        <span>6% cash etc</span>

    </div>

</div>


<script>
    function figpieModal() {
        const projects = <?php echo json_encode($posts_data, JSON_HEX_TAG | JSON_HEX_AMP | JSON_HEX_APOS | JSON_HEX_QUOT); ?>;

        return {
            modalIndex: -1,
            projects: projects,
            hasMultipleProjects: false,

            init() {
                this.hasMultipleProjects = this.projects.length > 1;
            },

            get currentProject() {
                return this.projects[this.modalIndex] || {};
            },

            get isModalOpen() {
                return this.modalIndex >= 0;
            },

            openModal(index) {
                // Validate the index exists
                if (index < 0 || index >= this.projects.length || !this.projects[index]) {
                    return;
                }

                this.modalIndex = index;

                // Add active class and prevent body scrolling
                this.$nextTick(() => {
                    const modal = document.getElementById('figpie__modal');
                    if (modal) {
                        modal.classList.add('active');
                    }
                    document.documentElement.classList.add('menu-opened');
                    document.body.style.overflow = 'hidden';
                });
            },

            closeModal() {
                this.modalIndex = -1;

                // Remove active class and restore body scrolling
                const modal = document.getElementById('figpie__modal');
                if (modal) {
                    modal.classList.remove('active');
                }
                document.documentElement.classList.remove('menu-opened');
                document.body.style.overflow = '';
            },

            next() {
                if (this.modalIndex < this.projects.length - 1) {
                    this.modalIndex++;
                }
            },

            prev() {
                if (this.modalIndex > 0) {
                    this.modalIndex--;
                }
            },

            handleKeyNavigation(event) {
                if (!this.isModalOpen) return;

                if (event.key === 'ArrowRight') {
                    this.next();
                } else if (event.key === 'ArrowLeft') {
                    this.prev();
                }
            }
        }
    }
</script>