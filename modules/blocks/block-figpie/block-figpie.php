<?php
// Set block ID and classes
$id = !empty($block['anchor']) ? $block['anchor'] : 'lmn-' . $block['id'];
$className = 'lmn-figpie'
    . (!empty($block['className']) ? ' ' . $block['className'] : '')
    . (!empty($block['align']) ? ' align' . $block['align'] : '');
$cleanedClassName = trim(str_replace('lmn-figpie', '', $className));

if (is_admin()) {
    echo '<p><strong>Figpie</strong> â€“ interactive on front end.</p>';
    return;
}

?>

<div class="<?= esc_attr($className); ?>">

    <div class="figpie-wrapper" x-data="figpieModal()">

        <?php

        if (have_rows('figpie')):


            $index = 0;
            while (have_rows('figpie')) : the_row();

                $figpie_type = get_sub_field('figpie_type');

                // Store post data for Alpine.js
                $post_data = array(
                    'title' => get_sub_field('label'),
                    'content' => get_sub_field('text')
                );

                $stats = array();
                if (have_rows('stats')) {
                    while (have_rows('stats')) {
                        the_row();
                        $stats[] = array(
                            'label' => get_sub_field('stats_label'),
                            'value' => get_sub_field('stats_value')
                        );
                    }
                }
                $post_data['stats'] = $stats;

                $posts_data[] = $post_data;

        ?>

                <div class="col">

                    <?php if ($figpie_type == 'public'): ?>

                        <svg width="402" height="402" viewBox="0 0 402 402" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M201.001 201.316L376.262 297.667C323.049 394.461 201.444 429.791 104.65 376.578C86.2589 366.467 69.5737 353.525 55.207 338.226L201.001 201.316Z" fill="#34335D" stroke="#010035" />
                            <g clip-path="url(#clip0_5_14214)">
                                <path opacity="0.5" d="M201.501 3.40234L169.745 35.1582L170.452 35.8652L201.501 4.81641V11.4023L177.745 35.1582L178.452 35.8652L201.501 12.8164V19.4023L185.745 35.1582L186.452 35.8652L201.501 20.8164V201.316L200.536 201.5L138.215 44.1016L180.44 1.87598C182.835 1.62915 185.234 1.42522 187.638 1.26465L142.335 46.5684L143.042 47.2754L189.15 1.16602C191.438 1.03055 193.73 0.935874 196.023 0.878906L161.745 35.1582L162.452 35.8652L197.466 0.850586C198.644 0.829815 199.822 0.816406 201.001 0.816406H201.501V3.40234ZM137.814 43.0879L135.946 38.3701L171.282 3.03418C173.8 2.65682 176.325 2.32724 178.856 2.0459L137.814 43.0879ZM135.546 37.3564L133.678 32.6387L161.586 4.73047C164.251 4.19621 166.926 3.71754 169.61 3.29199L135.546 37.3564ZM133.277 31.625L131.409 26.9072L151.219 7.09766C154.066 6.36774 156.929 5.70142 159.805 5.09766L133.277 31.625ZM131.009 25.8936L129.141 21.1758L139.989 10.3271C143.074 9.34166 146.18 8.43072 149.306 7.59668L131.009 25.8936ZM128.739 20.1631L126.911 15.5449L126.727 15.0801L127.192 14.8965C130.726 13.4975 134.295 12.2022 137.894 11.0088L128.739 20.1631Z" fill="#34335D" />
                            </g>
                            <path d="M201.001 201.319L55.2069 338.228C-20.4061 257.708 -16.4285 131.138 64.0912 55.5249C82.4666 38.2692 103.938 24.6428 127.376 15.3633L201.001 201.319Z" fill="#34335D" stroke="#010035" />
                            <path d="M201 201.316V1.31641C311.457 1.31641 401 90.8595 401 201.316C401 235.004 392.491 268.146 376.261 297.667L201 201.316Z" fill="#75C69B" stroke="#010035" />
                            <circle cx="200.991" cy="201.307" r="169.991" fill="#010035" stroke="#010035" stroke-width="2" />
                            <g class="button" @click="openModal(<?php echo $index; ?>)">

                                <g class="circle">
                                    <rect x="163.668" y="103.5" width="70" height="61" stroke="#010035" />
                                    <circle cx="198.668" cy="119" r="15.25" fill="#75C69B" stroke="#75C69B" stroke-width="1.5" />

                                    <rect width="16" height="16" transform="translate(190.668 111)" fill="#75C69B" />
                                    <path d="M198.668 114.332V123.665" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                    <path d="M194.004 119H203.337" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />

                                </g>
                                <path d="M164.442 149.2H165.716V157.922H170.826V159H164.442V149.2ZM174.702 159.21C174.03 159.21 173.447 159.07 172.952 158.79C172.467 158.51 172.089 158.099 171.818 157.558C171.557 157.017 171.426 156.363 171.426 155.598C171.426 154.917 171.562 154.305 171.832 153.764C172.112 153.223 172.495 152.798 172.98 152.49C173.475 152.182 174.026 152.028 174.632 152.028C175.295 152.028 175.86 152.177 176.326 152.476C176.793 152.765 177.148 153.181 177.39 153.722C177.633 154.254 177.754 154.884 177.754 155.612V155.85H172.63C172.64 156.354 172.733 156.788 172.91 157.152C173.097 157.516 173.344 157.796 173.652 157.992C173.97 158.179 174.324 158.272 174.716 158.272C175.174 158.272 175.566 158.169 175.892 157.964C176.219 157.749 176.42 157.399 176.494 156.914H177.684C177.638 157.334 177.498 157.717 177.264 158.062C177.031 158.407 176.695 158.687 176.256 158.902C175.827 159.107 175.309 159.21 174.702 159.21ZM176.466 154.996C176.466 154.38 176.303 153.89 175.976 153.526C175.659 153.162 175.211 152.98 174.632 152.98C174.082 152.98 173.629 153.171 173.274 153.554C172.92 153.937 172.719 154.417 172.672 154.996H176.466ZM181.325 159.21C180.896 159.21 180.504 159.126 180.149 158.958C179.794 158.79 179.514 158.552 179.309 158.244C179.104 157.927 179.001 157.563 179.001 157.152C179.001 156.545 179.206 156.069 179.617 155.724C180.037 155.379 180.578 155.155 181.241 155.052L182.683 154.828C182.935 154.791 183.112 154.721 183.215 154.618C183.318 154.515 183.369 154.361 183.369 154.156C183.369 153.792 183.243 153.507 182.991 153.302C182.739 153.087 182.412 152.98 182.011 152.98C181.507 152.98 181.12 153.106 180.849 153.358C180.578 153.601 180.434 153.937 180.415 154.366H179.211C179.23 153.946 179.346 153.559 179.561 153.204C179.776 152.849 180.084 152.565 180.485 152.35C180.896 152.135 181.372 152.028 181.913 152.028C182.464 152.028 182.935 152.131 183.327 152.336C183.728 152.541 184.032 152.835 184.237 153.218C184.442 153.601 184.545 154.053 184.545 154.576V159H183.397V158.664C183.397 158.468 183.397 158.277 183.397 158.09C183.229 158.445 182.963 158.72 182.599 158.916C182.244 159.112 181.82 159.21 181.325 159.21ZM181.493 158.272C181.848 158.272 182.165 158.197 182.445 158.048C182.734 157.889 182.958 157.675 183.117 157.404C183.285 157.124 183.369 156.807 183.369 156.452V155.458C183.332 155.523 183.248 155.579 183.117 155.626C182.996 155.673 182.832 155.715 182.627 155.752L181.647 155.934C181.218 156.018 180.877 156.158 180.625 156.354C180.373 156.55 180.247 156.816 180.247 157.152C180.247 157.488 180.364 157.759 180.597 157.964C180.84 158.169 181.138 158.272 181.493 158.272ZM186.53 152.252H187.734V152.546C187.734 152.817 187.734 153.092 187.734 153.372C187.911 152.971 188.182 152.649 188.546 152.406C188.919 152.154 189.353 152.028 189.848 152.028C189.979 152.028 190.081 152.033 190.156 152.042V153.232C190.025 153.213 189.899 153.204 189.778 153.204C189.339 153.204 188.966 153.288 188.658 153.456C188.359 153.615 188.131 153.862 187.972 154.198C187.813 154.525 187.734 154.935 187.734 155.43V159H186.53V152.252ZM191.507 152.252H192.697V152.714C192.697 152.863 192.697 153.013 192.697 153.162C192.893 152.845 193.182 152.579 193.565 152.364C193.947 152.14 194.353 152.028 194.783 152.028C195.296 152.028 195.739 152.135 196.113 152.35C196.486 152.555 196.771 152.863 196.967 153.274C197.172 153.685 197.275 154.175 197.275 154.744V159H196.071V154.898C196.071 154.245 195.954 153.764 195.721 153.456C195.487 153.139 195.109 152.98 194.587 152.98C194.204 152.98 193.868 153.069 193.579 153.246C193.299 153.423 193.084 153.661 192.935 153.96C192.785 154.259 192.711 154.585 192.711 154.94V159H191.507V152.252ZM202.554 152.252H203.758V152.784C203.758 152.905 203.758 153.031 203.758 153.162C203.972 152.817 204.248 152.541 204.584 152.336C204.929 152.131 205.312 152.028 205.732 152.028C206.189 152.028 206.59 152.14 206.936 152.364C207.29 152.588 207.566 152.919 207.762 153.358C208.004 152.947 208.312 152.625 208.686 152.392C209.068 152.149 209.493 152.028 209.96 152.028C210.426 152.028 210.837 152.126 211.192 152.322C211.546 152.518 211.822 152.821 212.018 153.232C212.223 153.633 212.326 154.133 212.326 154.73V159H211.122V154.968C211.122 154.305 211.01 153.811 210.786 153.484C210.571 153.148 210.212 152.98 209.708 152.98C209.362 152.98 209.064 153.073 208.812 153.26C208.56 153.437 208.368 153.68 208.238 153.988C208.107 154.287 208.042 154.618 208.042 154.982V159H206.838V155.01C206.838 154.347 206.726 153.843 206.502 153.498C206.287 153.153 205.937 152.98 205.452 152.98C205.116 152.98 204.817 153.073 204.556 153.26C204.304 153.447 204.108 153.699 203.968 154.016C203.828 154.324 203.758 154.665 203.758 155.038V159H202.554V152.252ZM217.209 159.21C216.565 159.21 215.991 159.061 215.487 158.762C214.983 158.463 214.591 158.043 214.311 157.502C214.031 156.951 213.891 156.321 213.891 155.612C213.891 154.921 214.031 154.305 214.311 153.764C214.591 153.213 214.983 152.789 215.487 152.49C215.991 152.182 216.565 152.028 217.209 152.028C217.844 152.028 218.413 152.182 218.917 152.49C219.421 152.789 219.813 153.213 220.093 153.764C220.382 154.305 220.527 154.921 220.527 155.612C220.527 156.321 220.382 156.951 220.093 157.502C219.813 158.043 219.421 158.463 218.917 158.762C218.413 159.061 217.844 159.21 217.209 159.21ZM217.209 158.272C217.629 158.272 217.993 158.16 218.301 157.936C218.618 157.712 218.861 157.399 219.029 156.998C219.197 156.597 219.281 156.135 219.281 155.612C219.281 154.819 219.09 154.184 218.707 153.708C218.334 153.223 217.834 152.98 217.209 152.98C216.798 152.98 216.434 153.092 216.117 153.316C215.8 153.531 215.557 153.839 215.389 154.24C215.221 154.632 215.137 155.089 215.137 155.612C215.137 156.415 215.324 157.059 215.697 157.544C216.07 158.029 216.574 158.272 217.209 158.272ZM222.159 152.252H223.363V152.546C223.363 152.817 223.363 153.092 223.363 153.372C223.54 152.971 223.811 152.649 224.175 152.406C224.548 152.154 224.982 152.028 225.477 152.028C225.608 152.028 225.71 152.033 225.785 152.042V153.232C225.654 153.213 225.528 153.204 225.407 153.204C224.968 153.204 224.595 153.288 224.287 153.456C223.988 153.615 223.76 153.862 223.601 154.198C223.442 154.525 223.363 154.935 223.363 155.43V159H222.159V152.252ZM229.718 159.21C229.046 159.21 228.463 159.07 227.968 158.79C227.483 158.51 227.105 158.099 226.834 157.558C226.573 157.017 226.442 156.363 226.442 155.598C226.442 154.917 226.577 154.305 226.848 153.764C227.128 153.223 227.511 152.798 227.996 152.49C228.491 152.182 229.041 152.028 229.648 152.028C230.311 152.028 230.875 152.177 231.342 152.476C231.809 152.765 232.163 153.181 232.406 153.722C232.649 154.254 232.77 154.884 232.77 155.612V155.85H227.646C227.655 156.354 227.749 156.788 227.926 157.152C228.113 157.516 228.36 157.796 228.668 157.992C228.985 158.179 229.34 158.272 229.732 158.272C230.189 158.272 230.581 158.169 230.908 157.964C231.235 157.749 231.435 157.399 231.51 156.914H232.7C232.653 157.334 232.513 157.717 232.28 158.062C232.047 158.407 231.711 158.687 231.272 158.902C230.843 159.107 230.325 159.21 229.718 159.21ZM231.482 154.996C231.482 154.38 231.319 153.89 230.992 153.526C230.675 153.162 230.227 152.98 229.648 152.98C229.097 152.98 228.645 153.171 228.29 153.554C227.935 153.937 227.735 154.417 227.688 154.996H231.482Z" fill="white" />

                            </g>

                            <rect x="136.168" y="211" width="129" height="110.777" stroke="#010035" stroke-width="2" />
                            <path d="M162.192 266.952C152.616 266.952 146.512 261.016 146.008 251.384H148.808C149.2 259.448 154.128 264.096 161.408 264.096C168.576 264.096 172.104 259.728 172.104 254.296C172.104 248.36 168.352 244.664 160.232 244.664H155.808V242.368H160.176C167.008 242.368 171.04 238.56 171.04 233.184C171.04 229.04 168.576 225.12 162.08 225.12C155.472 225.12 151.496 229.096 150.712 235.76H146.288C147.24 228.032 153.4 222.824 162.64 222.824C171.208 222.824 175.8 227.304 175.8 233.072C175.8 238.56 171.6 242.256 165.216 243.264C172.16 244.048 177.088 247.912 177.088 254.52C177.088 261.24 171.6 266.952 162.192 266.952ZM198.286 266.952C188.71 266.952 182.606 261.016 182.102 251.384H184.902C185.294 259.448 190.222 264.096 197.502 264.096C204.67 264.096 208.198 259.728 208.198 254.296C208.198 248.36 204.446 244.664 196.326 244.664H191.902V242.368H196.27C203.102 242.368 207.134 238.56 207.134 233.184C207.134 229.04 204.67 225.12 198.174 225.12C191.566 225.12 187.59 229.096 186.806 235.76H182.382C183.334 228.032 189.494 222.824 198.734 222.824C207.302 222.824 211.894 227.304 211.894 233.072C211.894 238.56 207.694 242.256 201.31 243.264C208.254 244.048 213.182 247.912 213.182 254.52C213.182 261.24 207.694 266.952 198.286 266.952ZM219.484 266L251.292 223.608H254.148L222.284 266H219.484ZM217.748 231.896C217.748 226.688 221.556 223.048 226.82 223.048C232.14 223.048 235.948 226.688 235.948 231.896C235.948 237.104 232.14 240.8 226.82 240.8C221.556 240.8 217.748 237.104 217.748 231.896ZM221.164 231.896C221.164 236.32 223.292 239.008 226.82 239.008C230.348 239.008 232.532 236.32 232.532 231.896C232.532 227.528 230.348 224.84 226.82 224.84C223.292 224.84 221.164 227.528 221.164 231.896ZM237.572 257.712C237.572 252.448 241.324 248.808 246.644 248.808C251.908 248.808 255.716 252.448 255.716 257.712C255.716 262.864 251.908 266.616 246.644 266.616C241.324 266.616 237.572 262.864 237.572 257.712ZM240.988 257.712C240.988 262.08 243.06 264.768 246.644 264.768C250.172 264.768 252.3 262.08 252.3 257.712C252.3 253.288 250.172 250.6 246.644 250.6C243.06 250.6 240.988 253.288 240.988 257.712Z" fill="white" />
                            <path d="M187.587 282.2H189.505L194.475 290.558C194.475 290.147 194.475 289.737 194.475 289.326V282.2H195.763V292H193.985L188.861 283.432C188.861 283.824 188.861 284.221 188.861 284.622V292H187.587V282.2ZM201.035 282.2H202.575L206.509 292H205.095L202.057 284.104C202.029 284.029 202.001 283.955 201.973 283.88C201.908 283.703 201.843 283.53 201.777 283.362C201.74 283.474 201.707 283.558 201.679 283.614C201.661 283.67 201.633 283.754 201.595 283.866L201.497 284.104L198.459 292H197.115L201.035 282.2ZM199.369 288.024H204.171V289.088H199.369V288.024ZM205.962 282.2H207.362L209.98 289.326C210.092 289.606 210.199 289.891 210.302 290.18C210.358 290.329 210.414 290.479 210.47 290.628C210.517 290.488 210.596 290.278 210.708 289.998C210.792 289.774 210.876 289.55 210.96 289.326L213.578 282.2H214.936L211.142 292H209.672L205.962 282.2Z" fill="#CBD8FF" />
                            <path d="M139.405 303.577H143.773C144.488 303.577 145.128 303.679 145.693 303.881C146.269 304.073 146.733 304.409 147.085 304.889C147.437 305.359 147.613 305.983 147.613 306.761C147.613 307.529 147.443 308.153 147.101 308.633C146.76 309.103 146.301 309.439 145.725 309.641C145.16 309.833 144.509 309.929 143.773 309.929H140.861V314.777H139.405V303.577ZM143.757 308.713C144.579 308.713 145.176 308.543 145.549 308.201C145.933 307.86 146.125 307.38 146.125 306.761C146.125 306.132 145.933 305.647 145.549 305.305C145.176 304.964 144.579 304.793 143.757 304.793H140.861V308.713H143.757ZM151.884 315.017C151.287 315.017 150.78 314.9 150.364 314.665C149.948 314.431 149.633 314.089 149.42 313.641C149.207 313.183 149.1 312.628 149.1 311.977V307.065H150.476V311.689C150.476 312.447 150.615 313.012 150.892 313.385C151.169 313.759 151.617 313.945 152.236 313.945C152.652 313.945 153.004 313.844 153.292 313.641C153.591 313.428 153.815 313.129 153.964 312.745C154.124 312.351 154.204 311.876 154.204 311.321V307.065H155.564V314.777H154.22V314.313C154.22 314.153 154.22 313.999 154.22 313.849V313.705C154.039 314.111 153.735 314.431 153.308 314.665C152.881 314.9 152.407 315.017 151.884 315.017ZM161.818 315.017C161.285 315.017 160.794 314.9 160.346 314.665C159.898 314.42 159.551 314.1 159.306 313.705C159.306 313.919 159.306 314.137 159.306 314.361V314.777H157.93V303.577H159.306V307.481C159.306 307.684 159.306 307.892 159.306 308.105C159.573 307.732 159.925 307.423 160.362 307.177C160.81 306.932 161.306 306.809 161.85 306.809C162.575 306.809 163.205 306.985 163.738 307.337C164.282 307.689 164.693 308.18 164.97 308.809C165.258 309.428 165.402 310.132 165.402 310.921C165.402 311.721 165.253 312.431 164.954 313.049C164.666 313.668 164.25 314.153 163.706 314.505C163.162 314.847 162.533 315.017 161.818 315.017ZM161.594 313.945C162.063 313.945 162.474 313.817 162.826 313.561C163.189 313.305 163.466 312.953 163.658 312.505C163.861 312.047 163.962 311.519 163.962 310.921C163.962 310.335 163.861 309.812 163.658 309.353C163.466 308.895 163.189 308.537 162.826 308.281C162.474 308.025 162.063 307.897 161.594 307.897C161.135 307.897 160.725 308.02 160.362 308.265C159.999 308.5 159.717 308.847 159.514 309.305C159.322 309.764 159.226 310.297 159.226 310.905C159.226 311.503 159.327 312.031 159.53 312.489C159.733 312.948 160.01 313.305 160.362 313.561C160.725 313.817 161.135 313.945 161.594 313.945ZM167.274 303.577H168.65V314.777H167.274V303.577ZM167.274 303.577H167.962V304.713H167.274V303.577ZM167.274 313.641H168.65V314.777H167.274V313.641ZM171.024 307.065H172.4V314.777H171.024V307.065ZM171.024 313.641H172.4V314.777H171.024V313.641ZM171.024 307.065H171.712V308.201H171.024V307.065ZM170.912 303.961H172.512V305.609H170.912V303.961ZM178.102 315.017C177.387 315.017 176.737 314.863 176.15 314.553C175.574 314.244 175.115 313.78 174.774 313.161C174.443 312.543 174.278 311.791 174.278 310.905C174.278 310.105 174.449 309.396 174.79 308.777C175.131 308.159 175.595 307.679 176.182 307.337C176.779 306.985 177.441 306.809 178.166 306.809C178.774 306.809 179.323 306.927 179.814 307.161C180.305 307.396 180.699 307.727 180.998 308.153C181.297 308.58 181.473 309.081 181.526 309.657H180.102C180.038 309.135 179.83 308.713 179.478 308.393C179.137 308.063 178.689 307.897 178.134 307.897C177.654 307.897 177.227 308.031 176.854 308.297C176.491 308.553 176.209 308.911 176.006 309.369C175.803 309.828 175.702 310.34 175.702 310.905C175.702 311.513 175.803 312.047 176.006 312.505C176.209 312.964 176.497 313.321 176.87 313.577C177.243 313.823 177.675 313.945 178.166 313.945C178.731 313.945 179.195 313.791 179.558 313.481C179.921 313.172 180.139 312.74 180.214 312.185H181.574C181.521 312.751 181.35 313.247 181.062 313.673C180.785 314.1 180.395 314.431 179.894 314.665C179.393 314.9 178.795 315.017 178.102 315.017ZM190.461 315.017C189.747 315.017 189.096 314.863 188.509 314.553C187.933 314.244 187.475 313.78 187.133 313.161C186.803 312.543 186.637 311.791 186.637 310.905C186.637 310.105 186.808 309.396 187.149 308.777C187.491 308.159 187.955 307.679 188.541 307.337C189.139 306.985 189.8 306.809 190.525 306.809C191.133 306.809 191.683 306.927 192.173 307.161C192.664 307.396 193.059 307.727 193.357 308.153C193.656 308.58 193.832 309.081 193.885 309.657H192.461C192.397 309.135 192.189 308.713 191.837 308.393C191.496 308.063 191.048 307.897 190.493 307.897C190.013 307.897 189.587 308.031 189.213 308.297C188.851 308.553 188.568 308.911 188.365 309.369C188.163 309.828 188.061 310.34 188.061 310.905C188.061 311.513 188.163 312.047 188.365 312.505C188.568 312.964 188.856 313.321 189.229 313.577C189.603 313.823 190.035 313.945 190.525 313.945C191.091 313.945 191.555 313.791 191.917 313.481C192.28 313.172 192.499 312.74 192.573 312.185H193.933C193.88 312.751 193.709 313.247 193.421 313.673C193.144 314.1 192.755 314.431 192.253 314.665C191.752 314.9 191.155 315.017 190.461 315.017ZM199.039 315.017C198.303 315.017 197.647 314.847 197.071 314.505C196.495 314.164 196.047 313.684 195.727 313.065C195.407 312.436 195.247 311.716 195.247 310.905C195.247 310.116 195.407 309.412 195.727 308.793C196.047 308.164 196.495 307.679 197.071 307.337C197.647 306.985 198.303 306.809 199.039 306.809C199.764 306.809 200.415 306.985 200.991 307.337C201.567 307.679 202.015 308.164 202.335 308.793C202.665 309.412 202.831 310.116 202.831 310.905C202.831 311.716 202.665 312.436 202.335 313.065C202.015 313.684 201.567 314.164 200.991 314.505C200.415 314.847 199.764 315.017 199.039 315.017ZM199.039 313.945C199.519 313.945 199.935 313.817 200.287 313.561C200.649 313.305 200.927 312.948 201.119 312.489C201.311 312.031 201.407 311.503 201.407 310.905C201.407 309.999 201.188 309.273 200.751 308.729C200.324 308.175 199.753 307.897 199.039 307.897C198.569 307.897 198.153 308.025 197.791 308.281C197.428 308.527 197.151 308.879 196.959 309.337C196.767 309.785 196.671 310.308 196.671 310.905C196.671 311.823 196.884 312.559 197.311 313.113C197.737 313.668 198.313 313.945 199.039 313.945ZM204.696 307.065H206.072V307.673C206.072 307.812 206.072 307.956 206.072 308.105C206.317 307.711 206.632 307.396 207.016 307.161C207.41 306.927 207.848 306.809 208.328 306.809C208.85 306.809 209.309 306.937 209.704 307.193C210.109 307.449 210.424 307.828 210.648 308.329C210.925 307.86 211.277 307.492 211.704 307.225C212.141 306.948 212.626 306.809 213.16 306.809C213.693 306.809 214.162 306.921 214.568 307.145C214.973 307.369 215.288 307.716 215.512 308.185C215.746 308.644 215.864 309.215 215.864 309.897V314.777H214.488V310.169C214.488 309.412 214.36 308.847 214.104 308.473C213.858 308.089 213.448 307.897 212.872 307.897C212.477 307.897 212.136 308.004 211.848 308.217C211.56 308.42 211.341 308.697 211.192 309.049C211.042 309.391 210.968 309.769 210.968 310.185V314.777H209.592V310.217C209.592 309.46 209.464 308.884 209.208 308.489C208.962 308.095 208.562 307.897 208.008 307.897C207.624 307.897 207.282 308.004 206.984 308.217C206.696 308.431 206.472 308.719 206.312 309.081C206.152 309.433 206.072 309.823 206.072 310.249V314.777H204.696V307.065ZM218.149 307.065H219.525V307.625C219.525 307.785 219.525 307.951 219.525 308.121C219.76 307.759 220.106 307.449 220.565 307.193C221.024 306.937 221.525 306.809 222.069 306.809C222.794 306.809 223.424 306.985 223.957 307.337C224.501 307.689 224.912 308.175 225.189 308.793C225.477 309.412 225.621 310.116 225.621 310.905C225.621 311.716 225.472 312.431 225.173 313.049C224.874 313.668 224.453 314.153 223.909 314.505C223.365 314.847 222.741 315.017 222.037 315.017C221.493 315.017 221.002 314.9 220.565 314.665C220.128 314.431 219.781 314.111 219.525 313.705C219.525 313.919 219.525 314.132 219.525 314.345V318.105H218.149V307.065ZM221.829 313.945C222.298 313.945 222.709 313.817 223.061 313.561C223.424 313.305 223.701 312.948 223.893 312.489C224.085 312.031 224.181 311.503 224.181 310.905C224.181 310.319 224.085 309.801 223.893 309.353C223.701 308.895 223.424 308.537 223.061 308.281C222.709 308.025 222.298 307.897 221.829 307.897C221.37 307.897 220.96 308.02 220.597 308.265C220.234 308.511 219.952 308.863 219.749 309.321C219.546 309.769 219.445 310.297 219.445 310.905C219.445 311.503 219.546 312.031 219.749 312.489C219.952 312.948 220.229 313.305 220.581 313.561C220.944 313.817 221.36 313.945 221.829 313.945ZM229.685 315.017C229.194 315.017 228.746 314.921 228.341 314.729C227.935 314.537 227.615 314.265 227.381 313.913C227.146 313.551 227.029 313.135 227.029 312.665C227.029 311.972 227.263 311.428 227.733 311.033C228.213 310.639 228.831 310.383 229.589 310.265L231.237 310.009C231.525 309.967 231.727 309.887 231.845 309.769C231.962 309.652 232.021 309.476 232.021 309.241C232.021 308.825 231.877 308.5 231.589 308.265C231.301 308.02 230.927 307.897 230.469 307.897C229.893 307.897 229.45 308.041 229.141 308.329C228.831 308.607 228.666 308.991 228.645 309.481H227.269C227.29 309.001 227.423 308.559 227.669 308.153C227.914 307.748 228.266 307.423 228.725 307.177C229.194 306.932 229.738 306.809 230.357 306.809C230.986 306.809 231.525 306.927 231.973 307.161C232.431 307.396 232.778 307.732 233.013 308.169C233.247 308.607 233.365 309.124 233.365 309.721V314.777H232.053V314.393C232.053 314.169 232.053 313.951 232.053 313.737C231.861 314.143 231.557 314.457 231.141 314.681C230.735 314.905 230.25 315.017 229.685 315.017ZM229.877 313.945C230.282 313.945 230.645 313.86 230.965 313.689C231.295 313.508 231.551 313.263 231.733 312.953C231.925 312.633 232.021 312.271 232.021 311.865V310.729C231.978 310.804 231.882 310.868 231.733 310.921C231.594 310.975 231.407 311.023 231.173 311.065L230.053 311.273C229.562 311.369 229.173 311.529 228.885 311.753C228.597 311.977 228.453 312.281 228.453 312.665C228.453 313.049 228.586 313.359 228.853 313.593C229.13 313.828 229.471 313.945 229.877 313.945ZM235.633 307.065H236.993V307.593C236.993 307.764 236.993 307.935 236.993 308.105C237.217 307.743 237.548 307.439 237.985 307.193C238.423 306.937 238.887 306.809 239.377 306.809C239.964 306.809 240.471 306.932 240.897 307.177C241.324 307.412 241.649 307.764 241.873 308.233C242.108 308.703 242.225 309.263 242.225 309.913V314.777H240.849V310.089C240.849 309.343 240.716 308.793 240.449 308.441C240.183 308.079 239.751 307.897 239.153 307.897C238.716 307.897 238.332 307.999 238.001 308.201C237.681 308.404 237.436 308.676 237.265 309.017C237.095 309.359 237.009 309.732 237.009 310.137V314.777H235.633V307.065ZM244.508 307.065H245.884V314.777H244.508V307.065ZM244.508 313.641H245.884V314.777H244.508V313.641ZM244.508 307.065H245.196V308.201H244.508V307.065ZM244.396 303.961H245.996V305.609H244.396V303.961ZM251.506 315.017C250.738 315.017 250.072 314.857 249.506 314.537C248.952 314.217 248.52 313.748 248.21 313.129C247.912 312.511 247.762 311.764 247.762 310.889C247.762 310.111 247.917 309.412 248.226 308.793C248.546 308.175 248.984 307.689 249.538 307.337C250.104 306.985 250.733 306.809 251.426 306.809C252.184 306.809 252.829 306.98 253.362 307.321C253.896 307.652 254.301 308.127 254.578 308.745C254.856 309.353 254.994 310.073 254.994 310.905V311.177H249.138C249.149 311.753 249.256 312.249 249.458 312.665C249.672 313.081 249.954 313.401 250.306 313.625C250.669 313.839 251.074 313.945 251.522 313.945C252.045 313.945 252.493 313.828 252.866 313.593C253.24 313.348 253.469 312.948 253.554 312.393H254.914C254.861 312.873 254.701 313.311 254.434 313.705C254.168 314.1 253.784 314.42 253.282 314.665C252.792 314.9 252.2 315.017 251.506 315.017ZM253.522 310.201C253.522 309.497 253.336 308.937 252.962 308.521C252.6 308.105 252.088 307.897 251.426 307.897C250.797 307.897 250.28 308.116 249.874 308.553C249.469 308.991 249.24 309.54 249.186 310.201H253.522ZM259.587 315.017C258.905 315.017 258.318 314.9 257.827 314.665C257.337 314.431 256.958 314.105 256.691 313.689C256.425 313.273 256.286 312.788 256.275 312.233H257.619C257.641 312.767 257.822 313.188 258.163 313.497C258.515 313.796 258.995 313.945 259.603 313.945C260.137 313.945 260.563 313.833 260.883 313.609C261.214 313.375 261.379 313.065 261.379 312.681C261.379 312.372 261.267 312.121 261.043 311.929C260.83 311.727 260.494 311.583 260.035 311.497L258.867 311.273C258.131 311.135 257.555 310.879 257.139 310.505C256.723 310.132 256.515 309.657 256.515 309.081C256.515 308.644 256.643 308.255 256.899 307.913C257.155 307.572 257.507 307.305 257.955 307.113C258.414 306.911 258.931 306.809 259.507 306.809C260.126 306.809 260.659 306.911 261.107 307.113C261.555 307.305 261.902 307.588 262.147 307.961C262.403 308.324 262.547 308.767 262.579 309.289H261.219C261.166 308.831 260.979 308.484 260.659 308.249C260.35 308.015 259.934 307.897 259.411 307.897C258.953 307.897 258.585 307.999 258.307 308.201C258.03 308.404 257.891 308.671 257.891 309.001C257.891 309.3 257.998 309.535 258.211 309.705C258.425 309.876 258.755 310.004 259.203 310.089L260.403 310.313C261.139 310.452 261.71 310.703 262.115 311.065C262.531 311.428 262.739 311.919 262.739 312.537C262.739 312.996 262.611 313.417 262.355 313.801C262.099 314.175 261.731 314.473 261.251 314.697C260.782 314.911 260.227 315.017 259.587 315.017Z" fill="white" />
                            <defs>
                                <clipPath id="clip0_5_14214">
                                    <rect width="73.6249" height="200" fill="white" transform="translate(127.375 1.31641)" />
                                </clipPath>
                            </defs>
                        </svg>

                    <?php elseif ($figpie_type == 'private'): ?>

                        <svg width="402" height="402" viewBox="0 0 402 402" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M201.001 201.316L376.262 297.667C323.049 394.461 201.444 429.791 104.65 376.578C86.2589 366.467 69.5737 353.525 55.207 338.226L201.001 201.316Z" fill="#8559D7" stroke="#010035" />
                            <g clip-path="url(#clip0_5_14244)">
                                <path opacity="0.5" d="M201.501 3.40234L169.745 35.1582L170.452 35.8652L201.501 4.81641V11.4023L177.745 35.1582L178.452 35.8652L201.501 12.8164V19.4023L185.745 35.1582L186.452 35.8652L201.501 20.8164V201.316L200.536 201.5L138.215 44.1016L180.44 1.87598C182.835 1.62915 185.234 1.42522 187.638 1.26465L142.335 46.5684L143.042 47.2754L189.15 1.16602C191.438 1.03055 193.73 0.935874 196.023 0.878906L161.745 35.1582L162.452 35.8652L197.466 0.850586C198.644 0.829815 199.822 0.816406 201.001 0.816406H201.501V3.40234ZM137.814 43.0879L135.946 38.3701L171.282 3.03418C173.8 2.65682 176.325 2.32724 178.856 2.0459L137.814 43.0879ZM135.546 37.3564L133.678 32.6387L161.586 4.73047C164.251 4.19621 166.926 3.71754 169.61 3.29199L135.546 37.3564ZM133.277 31.625L131.409 26.9072L151.219 7.09766C154.066 6.36774 156.929 5.70142 159.805 5.09766L133.277 31.625ZM131.009 25.8936L129.141 21.1758L139.989 10.3271C143.074 9.34166 146.18 8.43072 149.306 7.59668L131.009 25.8936ZM128.739 20.1631L126.911 15.5449L126.727 15.0801L127.192 14.8965C130.726 13.4975 134.295 12.2022 137.894 11.0088L128.739 20.1631Z" fill="#34335D" />
                            </g>
                            <path d="M201.001 201.319L55.2069 338.228C-20.4061 257.708 -16.4285 131.138 64.0912 55.5249C82.4666 38.2692 103.938 24.6428 127.376 15.3633L201.001 201.319Z" fill="#34335D" stroke="#010035" />
                            <path d="M201 201.316V1.31641C311.457 1.31641 401 90.8595 401 201.316C401 235.004 392.491 268.146 376.261 297.667L201 201.316Z" fill="#34335D" stroke="#010035" />
                            <circle cx="200.991" cy="201.307" r="169.991" fill="#010035" stroke="#010035" stroke-width="2" />
                            <g class="button" @click="openModal(<?php echo $index; ?>)">

                                <g class="circle">
                                    <rect x="163.668" y="103.5" width="70" height="61" stroke="#010035" />
                                    <circle cx="198.668" cy="119" r="15.25" fill="#8559D7" stroke="#8559D7" stroke-width="1.5" />
                                    <rect width="16" height="16" transform="translate(190.668 111)" fill="#8559D7" />
                                    <path d="M198.668 114.332V123.665" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                    <path d="M194.004 119H203.337" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                </g>
                                <path d="M164.442 149.2H165.716V157.922H170.826V159H164.442V149.2ZM174.702 159.21C174.03 159.21 173.447 159.07 172.952 158.79C172.467 158.51 172.089 158.099 171.818 157.558C171.557 157.017 171.426 156.363 171.426 155.598C171.426 154.917 171.562 154.305 171.832 153.764C172.112 153.223 172.495 152.798 172.98 152.49C173.475 152.182 174.026 152.028 174.632 152.028C175.295 152.028 175.86 152.177 176.326 152.476C176.793 152.765 177.148 153.181 177.39 153.722C177.633 154.254 177.754 154.884 177.754 155.612V155.85H172.63C172.64 156.354 172.733 156.788 172.91 157.152C173.097 157.516 173.344 157.796 173.652 157.992C173.97 158.179 174.324 158.272 174.716 158.272C175.174 158.272 175.566 158.169 175.892 157.964C176.219 157.749 176.42 157.399 176.494 156.914H177.684C177.638 157.334 177.498 157.717 177.264 158.062C177.031 158.407 176.695 158.687 176.256 158.902C175.827 159.107 175.309 159.21 174.702 159.21ZM176.466 154.996C176.466 154.38 176.303 153.89 175.976 153.526C175.659 153.162 175.211 152.98 174.632 152.98C174.082 152.98 173.629 153.171 173.274 153.554C172.92 153.937 172.719 154.417 172.672 154.996H176.466ZM181.325 159.21C180.896 159.21 180.504 159.126 180.149 158.958C179.794 158.79 179.514 158.552 179.309 158.244C179.104 157.927 179.001 157.563 179.001 157.152C179.001 156.545 179.206 156.069 179.617 155.724C180.037 155.379 180.578 155.155 181.241 155.052L182.683 154.828C182.935 154.791 183.112 154.721 183.215 154.618C183.318 154.515 183.369 154.361 183.369 154.156C183.369 153.792 183.243 153.507 182.991 153.302C182.739 153.087 182.412 152.98 182.011 152.98C181.507 152.98 181.12 153.106 180.849 153.358C180.578 153.601 180.434 153.937 180.415 154.366H179.211C179.23 153.946 179.346 153.559 179.561 153.204C179.776 152.849 180.084 152.565 180.485 152.35C180.896 152.135 181.372 152.028 181.913 152.028C182.464 152.028 182.935 152.131 183.327 152.336C183.728 152.541 184.032 152.835 184.237 153.218C184.442 153.601 184.545 154.053 184.545 154.576V159H183.397V158.664C183.397 158.468 183.397 158.277 183.397 158.09C183.229 158.445 182.963 158.72 182.599 158.916C182.244 159.112 181.82 159.21 181.325 159.21ZM181.493 158.272C181.848 158.272 182.165 158.197 182.445 158.048C182.734 157.889 182.958 157.675 183.117 157.404C183.285 157.124 183.369 156.807 183.369 156.452V155.458C183.332 155.523 183.248 155.579 183.117 155.626C182.996 155.673 182.832 155.715 182.627 155.752L181.647 155.934C181.218 156.018 180.877 156.158 180.625 156.354C180.373 156.55 180.247 156.816 180.247 157.152C180.247 157.488 180.364 157.759 180.597 157.964C180.84 158.169 181.138 158.272 181.493 158.272ZM186.53 152.252H187.734V152.546C187.734 152.817 187.734 153.092 187.734 153.372C187.911 152.971 188.182 152.649 188.546 152.406C188.919 152.154 189.353 152.028 189.848 152.028C189.979 152.028 190.081 152.033 190.156 152.042V153.232C190.025 153.213 189.899 153.204 189.778 153.204C189.339 153.204 188.966 153.288 188.658 153.456C188.359 153.615 188.131 153.862 187.972 154.198C187.813 154.525 187.734 154.935 187.734 155.43V159H186.53V152.252ZM191.507 152.252H192.697V152.714C192.697 152.863 192.697 153.013 192.697 153.162C192.893 152.845 193.182 152.579 193.565 152.364C193.947 152.14 194.353 152.028 194.783 152.028C195.296 152.028 195.739 152.135 196.113 152.35C196.486 152.555 196.771 152.863 196.967 153.274C197.172 153.685 197.275 154.175 197.275 154.744V159H196.071V154.898C196.071 154.245 195.954 153.764 195.721 153.456C195.487 153.139 195.109 152.98 194.587 152.98C194.204 152.98 193.868 153.069 193.579 153.246C193.299 153.423 193.084 153.661 192.935 153.96C192.785 154.259 192.711 154.585 192.711 154.94V159H191.507V152.252ZM202.554 152.252H203.758V152.784C203.758 152.905 203.758 153.031 203.758 153.162C203.972 152.817 204.248 152.541 204.584 152.336C204.929 152.131 205.312 152.028 205.732 152.028C206.189 152.028 206.59 152.14 206.936 152.364C207.29 152.588 207.566 152.919 207.762 153.358C208.004 152.947 208.312 152.625 208.686 152.392C209.068 152.149 209.493 152.028 209.96 152.028C210.426 152.028 210.837 152.126 211.192 152.322C211.546 152.518 211.822 152.821 212.018 153.232C212.223 153.633 212.326 154.133 212.326 154.73V159H211.122V154.968C211.122 154.305 211.01 153.811 210.786 153.484C210.571 153.148 210.212 152.98 209.708 152.98C209.362 152.98 209.064 153.073 208.812 153.26C208.56 153.437 208.368 153.68 208.238 153.988C208.107 154.287 208.042 154.618 208.042 154.982V159H206.838V155.01C206.838 154.347 206.726 153.843 206.502 153.498C206.287 153.153 205.937 152.98 205.452 152.98C205.116 152.98 204.817 153.073 204.556 153.26C204.304 153.447 204.108 153.699 203.968 154.016C203.828 154.324 203.758 154.665 203.758 155.038V159H202.554V152.252ZM217.209 159.21C216.565 159.21 215.991 159.061 215.487 158.762C214.983 158.463 214.591 158.043 214.311 157.502C214.031 156.951 213.891 156.321 213.891 155.612C213.891 154.921 214.031 154.305 214.311 153.764C214.591 153.213 214.983 152.789 215.487 152.49C215.991 152.182 216.565 152.028 217.209 152.028C217.844 152.028 218.413 152.182 218.917 152.49C219.421 152.789 219.813 153.213 220.093 153.764C220.382 154.305 220.527 154.921 220.527 155.612C220.527 156.321 220.382 156.951 220.093 157.502C219.813 158.043 219.421 158.463 218.917 158.762C218.413 159.061 217.844 159.21 217.209 159.21ZM217.209 158.272C217.629 158.272 217.993 158.16 218.301 157.936C218.618 157.712 218.861 157.399 219.029 156.998C219.197 156.597 219.281 156.135 219.281 155.612C219.281 154.819 219.09 154.184 218.707 153.708C218.334 153.223 217.834 152.98 217.209 152.98C216.798 152.98 216.434 153.092 216.117 153.316C215.8 153.531 215.557 153.839 215.389 154.24C215.221 154.632 215.137 155.089 215.137 155.612C215.137 156.415 215.324 157.059 215.697 157.544C216.07 158.029 216.574 158.272 217.209 158.272ZM222.159 152.252H223.363V152.546C223.363 152.817 223.363 153.092 223.363 153.372C223.54 152.971 223.811 152.649 224.175 152.406C224.548 152.154 224.982 152.028 225.477 152.028C225.608 152.028 225.71 152.033 225.785 152.042V153.232C225.654 153.213 225.528 153.204 225.407 153.204C224.968 153.204 224.595 153.288 224.287 153.456C223.988 153.615 223.76 153.862 223.601 154.198C223.442 154.525 223.363 154.935 223.363 155.43V159H222.159V152.252ZM229.718 159.21C229.046 159.21 228.463 159.07 227.968 158.79C227.483 158.51 227.105 158.099 226.834 157.558C226.573 157.017 226.442 156.363 226.442 155.598C226.442 154.917 226.577 154.305 226.848 153.764C227.128 153.223 227.511 152.798 227.996 152.49C228.491 152.182 229.041 152.028 229.648 152.028C230.311 152.028 230.875 152.177 231.342 152.476C231.809 152.765 232.163 153.181 232.406 153.722C232.649 154.254 232.77 154.884 232.77 155.612V155.85H227.646C227.655 156.354 227.749 156.788 227.926 157.152C228.113 157.516 228.36 157.796 228.668 157.992C228.985 158.179 229.34 158.272 229.732 158.272C230.189 158.272 230.581 158.169 230.908 157.964C231.235 157.749 231.435 157.399 231.51 156.914H232.7C232.653 157.334 232.513 157.717 232.28 158.062C232.047 158.407 231.711 158.687 231.272 158.902C230.843 159.107 230.325 159.21 229.718 159.21ZM231.482 154.996C231.482 154.38 231.319 153.89 230.992 153.526C230.675 153.162 230.227 152.98 229.648 152.98C229.097 152.98 228.645 153.171 228.29 153.554C227.935 153.937 227.735 154.417 227.688 154.996H231.482Z" fill="white" />
                            </g>
                            <rect x="136.168" y="211" width="129" height="110.777" stroke="#010035" stroke-width="2" />
                            <path d="M161.837 266.952C152.261 266.952 146.157 261.016 145.653 251.384H148.453C148.845 259.448 153.773 264.096 161.053 264.096C168.221 264.096 171.749 259.728 171.749 254.296C171.749 248.36 167.997 244.664 159.877 244.664H155.453V242.368H159.821C166.653 242.368 170.685 238.56 170.685 233.184C170.685 229.04 168.221 225.12 161.725 225.12C155.117 225.12 151.141 229.096 150.357 235.76H145.933C146.885 228.032 153.045 222.824 162.285 222.824C170.853 222.824 175.445 227.304 175.445 233.072C175.445 238.56 171.245 242.256 164.861 243.264C171.805 244.048 176.733 247.912 176.733 254.52C176.733 261.24 171.245 266.952 161.837 266.952ZM197.763 266.896C188.075 266.896 182.251 258.832 182.251 244.832C182.251 230.776 188.075 222.824 197.763 222.824C207.507 222.824 213.331 230.832 213.331 244.888C213.331 258.888 207.507 266.896 197.763 266.896ZM187.235 244.888C187.235 258.16 191.099 264.544 197.763 264.544C204.483 264.544 208.403 258.16 208.403 244.888C208.403 231.56 204.483 225.176 197.763 225.176C191.099 225.176 187.235 231.56 187.235 244.888ZM219.839 266L251.647 223.608H254.503L222.639 266H219.839ZM218.103 231.896C218.103 226.688 221.911 223.048 227.175 223.048C232.495 223.048 236.303 226.688 236.303 231.896C236.303 237.104 232.495 240.8 227.175 240.8C221.911 240.8 218.103 237.104 218.103 231.896ZM221.519 231.896C221.519 236.32 223.647 239.008 227.175 239.008C230.703 239.008 232.887 236.32 232.887 231.896C232.887 227.528 230.703 224.84 227.175 224.84C223.647 224.84 221.519 227.528 221.519 231.896ZM237.927 257.712C237.927 252.448 241.679 248.808 246.999 248.808C252.263 248.808 256.071 252.448 256.071 257.712C256.071 262.864 252.263 266.616 246.999 266.616C241.679 266.616 237.927 262.864 237.927 257.712ZM241.343 257.712C241.343 262.08 243.415 264.768 246.999 264.768C250.527 264.768 252.655 262.08 252.655 257.712C252.655 253.288 250.527 250.6 246.999 250.6C243.415 250.6 241.343 253.288 241.343 257.712Z" fill="white" />
                            <path d="M187.587 282.2H189.505L194.475 290.558C194.475 290.147 194.475 289.737 194.475 289.326V282.2H195.763V292H193.985L188.861 283.432C188.861 283.824 188.861 284.221 188.861 284.622V292H187.587V282.2ZM201.035 282.2H202.575L206.509 292H205.095L202.057 284.104C202.029 284.029 202.001 283.955 201.973 283.88C201.908 283.703 201.843 283.53 201.777 283.362C201.74 283.474 201.707 283.558 201.679 283.614C201.661 283.67 201.633 283.754 201.595 283.866L201.497 284.104L198.459 292H197.115L201.035 282.2ZM199.369 288.024H204.171V289.088H199.369V288.024ZM205.962 282.2H207.362L209.98 289.326C210.092 289.606 210.199 289.891 210.302 290.18C210.358 290.329 210.414 290.479 210.47 290.628C210.517 290.488 210.596 290.278 210.708 289.998C210.792 289.774 210.876 289.55 210.96 289.326L213.578 282.2H214.936L211.142 292H209.672L205.962 282.2Z" fill="#CBD8FF" />
                            <path d="M152.155 303.577H156.523C157.238 303.577 157.878 303.679 158.443 303.881C159.019 304.073 159.483 304.409 159.835 304.889C160.187 305.359 160.363 305.983 160.363 306.761C160.363 307.529 160.193 308.153 159.851 308.633C159.51 309.103 159.051 309.439 158.475 309.641C157.91 309.833 157.259 309.929 156.523 309.929H153.611V314.777H152.155V303.577ZM156.507 308.713C157.329 308.713 157.926 308.543 158.299 308.201C158.683 307.86 158.875 307.38 158.875 306.761C158.875 306.132 158.683 305.647 158.299 305.305C157.926 304.964 157.329 304.793 156.507 304.793H153.611V308.713H156.507ZM161.914 307.065H163.29V307.401C163.29 307.711 163.29 308.025 163.29 308.345C163.493 307.887 163.802 307.519 164.218 307.241C164.645 306.953 165.141 306.809 165.706 306.809C165.856 306.809 165.973 306.815 166.058 306.825V308.185C165.909 308.164 165.765 308.153 165.626 308.153C165.125 308.153 164.698 308.249 164.346 308.441C164.005 308.623 163.744 308.905 163.562 309.289C163.381 309.663 163.29 310.132 163.29 310.697V314.777H161.914V307.065ZM167.602 307.065H168.978V314.777H167.602V307.065ZM167.602 313.641H168.978V314.777H167.602V313.641ZM167.602 307.065H168.29V308.201H167.602V307.065ZM167.49 303.961H169.09V305.609H167.49V303.961ZM170.376 307.065H171.88L173.848 312.649C173.933 312.895 174.019 313.145 174.104 313.401C174.189 313.145 174.275 312.895 174.36 312.649L176.28 307.065H177.72L174.792 314.777H173.336L170.376 307.065ZM181.185 315.017C180.694 315.017 180.246 314.921 179.841 314.729C179.435 314.537 179.115 314.265 178.881 313.913C178.646 313.551 178.529 313.135 178.529 312.665C178.529 311.972 178.763 311.428 179.233 311.033C179.713 310.639 180.331 310.383 181.089 310.265L182.737 310.009C183.025 309.967 183.227 309.887 183.345 309.769C183.462 309.652 183.521 309.476 183.521 309.241C183.521 308.825 183.377 308.5 183.089 308.265C182.801 308.02 182.427 307.897 181.969 307.897C181.393 307.897 180.95 308.041 180.641 308.329C180.331 308.607 180.166 308.991 180.145 309.481H178.769C178.79 309.001 178.923 308.559 179.169 308.153C179.414 307.748 179.766 307.423 180.225 307.177C180.694 306.932 181.238 306.809 181.857 306.809C182.486 306.809 183.025 306.927 183.473 307.161C183.931 307.396 184.278 307.732 184.513 308.169C184.747 308.607 184.865 309.124 184.865 309.721V314.777H183.553V314.393C183.553 314.169 183.553 313.951 183.553 313.737C183.361 314.143 183.057 314.457 182.641 314.681C182.235 314.905 181.75 315.017 181.185 315.017ZM181.377 313.945C181.782 313.945 182.145 313.86 182.465 313.689C182.795 313.508 183.051 313.263 183.233 312.953C183.425 312.633 183.521 312.271 183.521 311.865V310.729C183.478 310.804 183.382 310.868 183.233 310.921C183.094 310.975 182.907 311.023 182.673 311.065L181.553 311.273C181.062 311.369 180.673 311.529 180.385 311.753C180.097 311.977 179.953 312.281 179.953 312.665C179.953 313.049 180.086 313.359 180.353 313.593C180.63 313.828 180.971 313.945 181.377 313.945ZM189.822 314.905C189.182 314.905 188.654 314.729 188.238 314.377C187.833 314.015 187.63 313.433 187.63 312.633V308.201H186.19V307.065H187.63V304.521H189.006V307.065H190.606V308.201H189.006V312.489C189.006 312.916 189.102 313.22 189.294 313.401C189.497 313.583 189.78 313.673 190.142 313.673C190.302 313.673 190.494 313.657 190.718 313.625V314.809C190.58 314.841 190.436 314.863 190.286 314.873C190.137 314.895 189.982 314.905 189.822 314.905ZM195.584 315.017C194.816 315.017 194.15 314.857 193.584 314.537C193.03 314.217 192.598 313.748 192.288 313.129C191.99 312.511 191.84 311.764 191.84 310.889C191.84 310.111 191.995 309.412 192.304 308.793C192.624 308.175 193.062 307.689 193.616 307.337C194.182 306.985 194.811 306.809 195.504 306.809C196.262 306.809 196.907 306.98 197.44 307.321C197.974 307.652 198.379 308.127 198.656 308.745C198.934 309.353 199.072 310.073 199.072 310.905V311.177H193.216C193.227 311.753 193.334 312.249 193.536 312.665C193.75 313.081 194.032 313.401 194.384 313.625C194.747 313.839 195.152 313.945 195.6 313.945C196.123 313.945 196.571 313.828 196.944 313.593C197.318 313.348 197.547 312.948 197.632 312.393H198.992C198.939 312.873 198.779 313.311 198.512 313.705C198.246 314.1 197.862 314.42 197.36 314.665C196.87 314.9 196.278 315.017 195.584 315.017ZM197.6 310.201C197.6 309.497 197.414 308.937 197.04 308.521C196.678 308.105 196.166 307.897 195.504 307.897C194.875 307.897 194.358 308.116 193.952 308.553C193.547 308.991 193.318 309.54 193.264 310.201H197.6ZM208.039 315.017C207.325 315.017 206.674 314.863 206.087 314.553C205.511 314.244 205.053 313.78 204.711 313.161C204.381 312.543 204.215 311.791 204.215 310.905C204.215 310.105 204.386 309.396 204.727 308.777C205.069 308.159 205.533 307.679 206.119 307.337C206.717 306.985 207.378 306.809 208.103 306.809C208.711 306.809 209.261 306.927 209.751 307.161C210.242 307.396 210.637 307.727 210.935 308.153C211.234 308.58 211.41 309.081 211.463 309.657H210.039C209.975 309.135 209.767 308.713 209.415 308.393C209.074 308.063 208.626 307.897 208.071 307.897C207.591 307.897 207.165 308.031 206.791 308.297C206.429 308.553 206.146 308.911 205.943 309.369C205.741 309.828 205.639 310.34 205.639 310.905C205.639 311.513 205.741 312.047 205.943 312.505C206.146 312.964 206.434 313.321 206.807 313.577C207.181 313.823 207.613 313.945 208.103 313.945C208.669 313.945 209.133 313.791 209.495 313.481C209.858 313.172 210.077 312.74 210.151 312.185H211.511C211.458 312.751 211.287 313.247 210.999 313.673C210.722 314.1 210.333 314.431 209.831 314.665C209.33 314.9 208.733 315.017 208.039 315.017ZM215.513 315.017C215.022 315.017 214.574 314.921 214.169 314.729C213.763 314.537 213.443 314.265 213.209 313.913C212.974 313.551 212.857 313.135 212.857 312.665C212.857 311.972 213.091 311.428 213.561 311.033C214.041 310.639 214.659 310.383 215.417 310.265L217.065 310.009C217.353 309.967 217.555 309.887 217.673 309.769C217.79 309.652 217.849 309.476 217.849 309.241C217.849 308.825 217.705 308.5 217.417 308.265C217.129 308.02 216.755 307.897 216.297 307.897C215.721 307.897 215.278 308.041 214.969 308.329C214.659 308.607 214.494 308.991 214.473 309.481H213.097C213.118 309.001 213.251 308.559 213.497 308.153C213.742 307.748 214.094 307.423 214.553 307.177C215.022 306.932 215.566 306.809 216.185 306.809C216.814 306.809 217.353 306.927 217.801 307.161C218.259 307.396 218.606 307.732 218.841 308.169C219.075 308.607 219.193 309.124 219.193 309.721V314.777H217.881V314.393C217.881 314.169 217.881 313.951 217.881 313.737C217.689 314.143 217.385 314.457 216.969 314.681C216.563 314.905 216.078 315.017 215.513 315.017ZM215.705 313.945C216.11 313.945 216.473 313.86 216.793 313.689C217.123 313.508 217.379 313.263 217.561 312.953C217.753 312.633 217.849 312.271 217.849 311.865V310.729C217.806 310.804 217.71 310.868 217.561 310.921C217.422 310.975 217.235 311.023 217.001 311.065L215.881 311.273C215.39 311.369 215.001 311.529 214.713 311.753C214.425 311.977 214.281 312.281 214.281 312.665C214.281 313.049 214.414 313.359 214.681 313.593C214.958 313.828 215.299 313.945 215.705 313.945ZM221.461 307.065H222.837V307.625C222.837 307.785 222.837 307.951 222.837 308.121C223.072 307.759 223.419 307.449 223.877 307.193C224.336 306.937 224.837 306.809 225.381 306.809C226.107 306.809 226.736 306.985 227.269 307.337C227.813 307.689 228.224 308.175 228.501 308.793C228.789 309.412 228.933 310.116 228.933 310.905C228.933 311.716 228.784 312.431 228.485 313.049C228.187 313.668 227.765 314.153 227.221 314.505C226.677 314.847 226.053 315.017 225.349 315.017C224.805 315.017 224.315 314.9 223.877 314.665C223.44 314.431 223.093 314.111 222.837 313.705C222.837 313.919 222.837 314.132 222.837 314.345V318.105H221.461V307.065ZM225.141 313.945C225.611 313.945 226.021 313.817 226.373 313.561C226.736 313.305 227.013 312.948 227.205 312.489C227.397 312.031 227.493 311.503 227.493 310.905C227.493 310.319 227.397 309.801 227.205 309.353C227.013 308.895 226.736 308.537 226.373 308.281C226.021 308.025 225.611 307.897 225.141 307.897C224.683 307.897 224.272 308.02 223.909 308.265C223.547 308.511 223.264 308.863 223.061 309.321C222.859 309.769 222.757 310.297 222.757 310.905C222.757 311.503 222.859 312.031 223.061 312.489C223.264 312.948 223.541 313.305 223.893 313.561C224.256 313.817 224.672 313.945 225.141 313.945ZM230.805 307.065H232.181V314.777H230.805V307.065ZM230.805 313.641H232.181V314.777H230.805V313.641ZM230.805 307.065H231.493V308.201H230.805V307.065ZM230.693 303.961H232.293V305.609H230.693V303.961ZM237.291 314.905C236.651 314.905 236.123 314.729 235.707 314.377C235.302 314.015 235.099 313.433 235.099 312.633V308.201H233.659V307.065H235.099V304.521H236.475V307.065H238.075V308.201H236.475V312.489C236.475 312.916 236.571 313.22 236.763 313.401C236.966 313.583 237.248 313.673 237.611 313.673C237.771 313.673 237.963 313.657 238.187 313.625V314.809C238.048 314.841 237.904 314.863 237.755 314.873C237.606 314.895 237.451 314.905 237.291 314.905ZM242.122 315.017C241.631 315.017 241.183 314.921 240.778 314.729C240.373 314.537 240.053 314.265 239.818 313.913C239.583 313.551 239.466 313.135 239.466 312.665C239.466 311.972 239.701 311.428 240.17 311.033C240.65 310.639 241.269 310.383 242.026 310.265L243.674 310.009C243.962 309.967 244.165 309.887 244.282 309.769C244.399 309.652 244.458 309.476 244.458 309.241C244.458 308.825 244.314 308.5 244.026 308.265C243.738 308.02 243.365 307.897 242.906 307.897C242.33 307.897 241.887 308.041 241.578 308.329C241.269 308.607 241.103 308.991 241.082 309.481H239.706C239.727 309.001 239.861 308.559 240.106 308.153C240.351 307.748 240.703 307.423 241.162 307.177C241.631 306.932 242.175 306.809 242.794 306.809C243.423 306.809 243.962 306.927 244.41 307.161C244.869 307.396 245.215 307.732 245.45 308.169C245.685 308.607 245.802 309.124 245.802 309.721V314.777H244.49V314.393C244.49 314.169 244.49 313.951 244.49 313.737C244.298 314.143 243.994 314.457 243.578 314.681C243.173 314.905 242.687 315.017 242.122 315.017ZM242.314 313.945C242.719 313.945 243.082 313.86 243.402 313.689C243.733 313.508 243.989 313.263 244.17 312.953C244.362 312.633 244.458 312.271 244.458 311.865V310.729C244.415 310.804 244.319 310.868 244.17 310.921C244.031 310.975 243.845 311.023 243.61 311.065L242.49 311.273C241.999 311.369 241.61 311.529 241.322 311.753C241.034 311.977 240.89 312.281 240.89 312.665C240.89 313.049 241.023 313.359 241.29 313.593C241.567 313.828 241.909 313.945 242.314 313.945ZM248.071 303.577H249.447V314.777H248.071V303.577ZM248.071 303.577H248.759V304.713H248.071V303.577ZM248.071 313.641H249.447V314.777H248.071V313.641Z" fill="white" />
                            <defs>
                                <clipPath id="clip0_5_14244">
                                    <rect width="73.6249" height="200" fill="white" transform="translate(127.375 1.31641)" />
                                </clipPath>
                            </defs>
                        </svg>

                    <?php elseif ($figpie_type == 'funds'): ?>

                        <svg width="402" height="402" viewBox="0 0 402 402" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M201.001 201.316L376.262 297.667C323.049 394.461 201.444 429.791 104.65 376.578C86.2589 366.467 69.5737 353.525 55.207 338.226L201.001 201.316Z" fill="#34335D" stroke="#010035" />
                            <g clip-path="url(#clip0_5_14288)">
                                <path opacity="0.5" d="M201.501 3.40234L169.745 35.1582L170.452 35.8652L201.501 4.81641V11.4023L177.745 35.1582L178.452 35.8652L201.501 12.8164V19.4023L185.745 35.1582L186.452 35.8652L201.501 20.8164V201.316L200.536 201.5L138.215 44.1016L180.44 1.87598C182.835 1.62915 185.234 1.42522 187.638 1.26465L142.335 46.5684L143.042 47.2754L189.15 1.16602C191.438 1.03055 193.73 0.935874 196.023 0.878906L161.745 35.1582L162.452 35.8652L197.466 0.850586C198.644 0.829815 199.822 0.816406 201.001 0.816406H201.501V3.40234ZM137.814 43.0879L135.946 38.3701L171.282 3.03418C173.8 2.65682 176.325 2.32724 178.856 2.0459L137.814 43.0879ZM135.546 37.3564L133.678 32.6387L161.586 4.73047C164.251 4.19621 166.926 3.71754 169.61 3.29199L135.546 37.3564ZM133.277 31.625L131.409 26.9072L151.219 7.09766C154.066 6.36774 156.929 5.70142 159.805 5.09766L133.277 31.625ZM131.009 25.8936L129.141 21.1758L139.989 10.3271C143.074 9.34166 146.18 8.43072 149.306 7.59668L131.009 25.8936ZM128.739 20.1631L126.911 15.5449L126.727 15.0801L127.192 14.8965C130.726 13.4975 134.295 12.2022 137.894 11.0088L128.739 20.1631Z" fill="#34335D" />
                            </g>
                            <path d="M201.001 201.319L55.2069 338.228C-20.4061 257.708 -16.4285 131.138 64.0912 55.5249C82.4666 38.2692 103.938 24.6428 127.376 15.3633L201.001 201.319Z" fill="#5FAFD0" stroke="#010035" />
                            <path d="M201 201.316V1.31641C311.457 1.31641 401 90.8595 401 201.316C401 235.004 392.491 268.146 376.261 297.667L201 201.316Z" fill="#34335D" stroke="#010035" />
                            <circle cx="200.991" cy="201.307" r="169.991" fill="#010035" stroke="#010035" stroke-width="2" />
                            <g class="button" @click="openModal(<?php echo $index; ?>)">
                                <g class="circle">
                                    <rect x="163.668" y="103.5" width="70" height="61" stroke="#010035" />
                                    <circle cx="198.668" cy="119" r="15.25" fill="#5FAFD0" stroke="#5FAFD0" stroke-width="1.5" />
                                    <rect width="16" height="16" transform="translate(190.668 111)" fill="#5FAFD0" />
                                    <path d="M198.668 114.332V123.665" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                    <path d="M194.004 119H203.337" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                </g>
                                <path d="M164.442 149.2H165.716V157.922H170.826V159H164.442V149.2ZM174.702 159.21C174.03 159.21 173.447 159.07 172.952 158.79C172.467 158.51 172.089 158.099 171.818 157.558C171.557 157.017 171.426 156.363 171.426 155.598C171.426 154.917 171.562 154.305 171.832 153.764C172.112 153.223 172.495 152.798 172.98 152.49C173.475 152.182 174.026 152.028 174.632 152.028C175.295 152.028 175.86 152.177 176.326 152.476C176.793 152.765 177.148 153.181 177.39 153.722C177.633 154.254 177.754 154.884 177.754 155.612V155.85H172.63C172.64 156.354 172.733 156.788 172.91 157.152C173.097 157.516 173.344 157.796 173.652 157.992C173.97 158.179 174.324 158.272 174.716 158.272C175.174 158.272 175.566 158.169 175.892 157.964C176.219 157.749 176.42 157.399 176.494 156.914H177.684C177.638 157.334 177.498 157.717 177.264 158.062C177.031 158.407 176.695 158.687 176.256 158.902C175.827 159.107 175.309 159.21 174.702 159.21ZM176.466 154.996C176.466 154.38 176.303 153.89 175.976 153.526C175.659 153.162 175.211 152.98 174.632 152.98C174.082 152.98 173.629 153.171 173.274 153.554C172.92 153.937 172.719 154.417 172.672 154.996H176.466ZM181.325 159.21C180.896 159.21 180.504 159.126 180.149 158.958C179.794 158.79 179.514 158.552 179.309 158.244C179.104 157.927 179.001 157.563 179.001 157.152C179.001 156.545 179.206 156.069 179.617 155.724C180.037 155.379 180.578 155.155 181.241 155.052L182.683 154.828C182.935 154.791 183.112 154.721 183.215 154.618C183.318 154.515 183.369 154.361 183.369 154.156C183.369 153.792 183.243 153.507 182.991 153.302C182.739 153.087 182.412 152.98 182.011 152.98C181.507 152.98 181.12 153.106 180.849 153.358C180.578 153.601 180.434 153.937 180.415 154.366H179.211C179.23 153.946 179.346 153.559 179.561 153.204C179.776 152.849 180.084 152.565 180.485 152.35C180.896 152.135 181.372 152.028 181.913 152.028C182.464 152.028 182.935 152.131 183.327 152.336C183.728 152.541 184.032 152.835 184.237 153.218C184.442 153.601 184.545 154.053 184.545 154.576V159H183.397V158.664C183.397 158.468 183.397 158.277 183.397 158.09C183.229 158.445 182.963 158.72 182.599 158.916C182.244 159.112 181.82 159.21 181.325 159.21ZM181.493 158.272C181.848 158.272 182.165 158.197 182.445 158.048C182.734 157.889 182.958 157.675 183.117 157.404C183.285 157.124 183.369 156.807 183.369 156.452V155.458C183.332 155.523 183.248 155.579 183.117 155.626C182.996 155.673 182.832 155.715 182.627 155.752L181.647 155.934C181.218 156.018 180.877 156.158 180.625 156.354C180.373 156.55 180.247 156.816 180.247 157.152C180.247 157.488 180.364 157.759 180.597 157.964C180.84 158.169 181.138 158.272 181.493 158.272ZM186.53 152.252H187.734V152.546C187.734 152.817 187.734 153.092 187.734 153.372C187.911 152.971 188.182 152.649 188.546 152.406C188.919 152.154 189.353 152.028 189.848 152.028C189.979 152.028 190.081 152.033 190.156 152.042V153.232C190.025 153.213 189.899 153.204 189.778 153.204C189.339 153.204 188.966 153.288 188.658 153.456C188.359 153.615 188.131 153.862 187.972 154.198C187.813 154.525 187.734 154.935 187.734 155.43V159H186.53V152.252ZM191.507 152.252H192.697V152.714C192.697 152.863 192.697 153.013 192.697 153.162C192.893 152.845 193.182 152.579 193.565 152.364C193.947 152.14 194.353 152.028 194.783 152.028C195.296 152.028 195.739 152.135 196.113 152.35C196.486 152.555 196.771 152.863 196.967 153.274C197.172 153.685 197.275 154.175 197.275 154.744V159H196.071V154.898C196.071 154.245 195.954 153.764 195.721 153.456C195.487 153.139 195.109 152.98 194.587 152.98C194.204 152.98 193.868 153.069 193.579 153.246C193.299 153.423 193.084 153.661 192.935 153.96C192.785 154.259 192.711 154.585 192.711 154.94V159H191.507V152.252ZM202.554 152.252H203.758V152.784C203.758 152.905 203.758 153.031 203.758 153.162C203.972 152.817 204.248 152.541 204.584 152.336C204.929 152.131 205.312 152.028 205.732 152.028C206.189 152.028 206.59 152.14 206.936 152.364C207.29 152.588 207.566 152.919 207.762 153.358C208.004 152.947 208.312 152.625 208.686 152.392C209.068 152.149 209.493 152.028 209.96 152.028C210.426 152.028 210.837 152.126 211.192 152.322C211.546 152.518 211.822 152.821 212.018 153.232C212.223 153.633 212.326 154.133 212.326 154.73V159H211.122V154.968C211.122 154.305 211.01 153.811 210.786 153.484C210.571 153.148 210.212 152.98 209.708 152.98C209.362 152.98 209.064 153.073 208.812 153.26C208.56 153.437 208.368 153.68 208.238 153.988C208.107 154.287 208.042 154.618 208.042 154.982V159H206.838V155.01C206.838 154.347 206.726 153.843 206.502 153.498C206.287 153.153 205.937 152.98 205.452 152.98C205.116 152.98 204.817 153.073 204.556 153.26C204.304 153.447 204.108 153.699 203.968 154.016C203.828 154.324 203.758 154.665 203.758 155.038V159H202.554V152.252ZM217.209 159.21C216.565 159.21 215.991 159.061 215.487 158.762C214.983 158.463 214.591 158.043 214.311 157.502C214.031 156.951 213.891 156.321 213.891 155.612C213.891 154.921 214.031 154.305 214.311 153.764C214.591 153.213 214.983 152.789 215.487 152.49C215.991 152.182 216.565 152.028 217.209 152.028C217.844 152.028 218.413 152.182 218.917 152.49C219.421 152.789 219.813 153.213 220.093 153.764C220.382 154.305 220.527 154.921 220.527 155.612C220.527 156.321 220.382 156.951 220.093 157.502C219.813 158.043 219.421 158.463 218.917 158.762C218.413 159.061 217.844 159.21 217.209 159.21ZM217.209 158.272C217.629 158.272 217.993 158.16 218.301 157.936C218.618 157.712 218.861 157.399 219.029 156.998C219.197 156.597 219.281 156.135 219.281 155.612C219.281 154.819 219.09 154.184 218.707 153.708C218.334 153.223 217.834 152.98 217.209 152.98C216.798 152.98 216.434 153.092 216.117 153.316C215.8 153.531 215.557 153.839 215.389 154.24C215.221 154.632 215.137 155.089 215.137 155.612C215.137 156.415 215.324 157.059 215.697 157.544C216.07 158.029 216.574 158.272 217.209 158.272ZM222.159 152.252H223.363V152.546C223.363 152.817 223.363 153.092 223.363 153.372C223.54 152.971 223.811 152.649 224.175 152.406C224.548 152.154 224.982 152.028 225.477 152.028C225.608 152.028 225.71 152.033 225.785 152.042V153.232C225.654 153.213 225.528 153.204 225.407 153.204C224.968 153.204 224.595 153.288 224.287 153.456C223.988 153.615 223.76 153.862 223.601 154.198C223.442 154.525 223.363 154.935 223.363 155.43V159H222.159V152.252ZM229.718 159.21C229.046 159.21 228.463 159.07 227.968 158.79C227.483 158.51 227.105 158.099 226.834 157.558C226.573 157.017 226.442 156.363 226.442 155.598C226.442 154.917 226.577 154.305 226.848 153.764C227.128 153.223 227.511 152.798 227.996 152.49C228.491 152.182 229.041 152.028 229.648 152.028C230.311 152.028 230.875 152.177 231.342 152.476C231.809 152.765 232.163 153.181 232.406 153.722C232.649 154.254 232.77 154.884 232.77 155.612V155.85H227.646C227.655 156.354 227.749 156.788 227.926 157.152C228.113 157.516 228.36 157.796 228.668 157.992C228.985 158.179 229.34 158.272 229.732 158.272C230.189 158.272 230.581 158.169 230.908 157.964C231.235 157.749 231.435 157.399 231.51 156.914H232.7C232.653 157.334 232.513 157.717 232.28 158.062C232.047 158.407 231.711 158.687 231.272 158.902C230.843 159.107 230.325 159.21 229.718 159.21ZM231.482 154.996C231.482 154.38 231.319 153.89 230.992 153.526C230.675 153.162 230.227 152.98 229.648 152.98C229.097 152.98 228.645 153.171 228.29 153.554C227.935 153.937 227.735 154.417 227.688 154.996H231.482Z" fill="white" />
                            </g>
                            <rect x="136.168" y="211" width="129" height="110.777" stroke="#010035" stroke-width="2" />
                            <path d="M169.028 266.952C159.452 266.952 153.348 261.016 152.844 251.384H155.644C156.036 259.448 160.964 264.096 168.244 264.096C175.412 264.096 178.94 259.728 178.94 254.296C178.94 248.36 175.188 244.664 167.068 244.664H162.644V242.368H167.012C173.844 242.368 177.876 238.56 177.876 233.184C177.876 229.04 175.412 225.12 168.916 225.12C162.308 225.12 158.332 229.096 157.548 235.76H153.124C154.076 228.032 160.236 222.824 169.476 222.824C178.044 222.824 182.636 227.304 182.636 233.072C182.636 238.56 178.436 242.256 172.052 243.264C178.996 244.048 183.924 247.912 183.924 254.52C183.924 261.24 178.436 266.952 169.028 266.952ZM195.098 266V265.832C197.618 264.488 197.954 262.696 197.954 258.776V230.496C196.666 233.408 193.194 237.216 188.266 237.72V234.192C194.874 233.24 199.13 227.584 199.97 223.328H202.882V258.888C202.882 262.752 203.162 264.488 205.57 265.832V266H195.098ZM212.648 266L244.456 223.608H247.312L215.448 266H212.648ZM210.912 231.896C210.912 226.688 214.72 223.048 219.984 223.048C225.304 223.048 229.112 226.688 229.112 231.896C229.112 237.104 225.304 240.8 219.984 240.8C214.72 240.8 210.912 237.104 210.912 231.896ZM214.328 231.896C214.328 236.32 216.456 239.008 219.984 239.008C223.512 239.008 225.696 236.32 225.696 231.896C225.696 227.528 223.512 224.84 219.984 224.84C216.456 224.84 214.328 227.528 214.328 231.896ZM230.736 257.712C230.736 252.448 234.488 248.808 239.808 248.808C245.072 248.808 248.88 252.448 248.88 257.712C248.88 262.864 245.072 266.616 239.808 266.616C234.488 266.616 230.736 262.864 230.736 257.712ZM234.152 257.712C234.152 262.08 236.224 264.768 239.808 264.768C243.336 264.768 245.464 262.08 245.464 257.712C245.464 253.288 243.336 250.6 239.808 250.6C236.224 250.6 234.152 253.288 234.152 257.712Z" fill="white" />
                            <path d="M187.587 282.2H189.505L194.475 290.558C194.475 290.147 194.475 289.737 194.475 289.326V282.2H195.763V292H193.985L188.861 283.432C188.861 283.824 188.861 284.221 188.861 284.622V292H187.587V282.2ZM201.035 282.2H202.575L206.509 292H205.095L202.057 284.104C202.029 284.029 202.001 283.955 201.973 283.88C201.908 283.703 201.843 283.53 201.777 283.362C201.74 283.474 201.707 283.558 201.679 283.614C201.661 283.67 201.633 283.754 201.595 283.866L201.497 284.104L198.459 292H197.115L201.035 282.2ZM199.369 288.024H204.171V289.088H199.369V288.024ZM205.962 282.2H207.362L209.98 289.326C210.092 289.606 210.199 289.891 210.302 290.18C210.358 290.329 210.414 290.479 210.47 290.628C210.517 290.488 210.596 290.278 210.708 289.998C210.792 289.774 210.876 289.55 210.96 289.326L213.578 282.2H214.936L211.142 292H209.672L205.962 282.2Z" fill="#CBD8FF" />
                            <path d="M180.249 303.577H187.545V304.793H181.705V308.457H187.273V309.689H181.705V314.777H180.249V303.577ZM191.806 315.017C191.209 315.017 190.702 314.9 190.286 314.665C189.87 314.431 189.555 314.089 189.342 313.641C189.129 313.183 189.022 312.628 189.022 311.977V307.065H190.398V311.689C190.398 312.447 190.537 313.012 190.814 313.385C191.091 313.759 191.539 313.945 192.158 313.945C192.574 313.945 192.926 313.844 193.214 313.641C193.513 313.428 193.737 313.129 193.886 312.745C194.046 312.351 194.126 311.876 194.126 311.321V307.065H195.486V314.777H194.142V314.313C194.142 314.153 194.142 313.999 194.142 313.849V313.705C193.961 314.111 193.657 314.431 193.23 314.665C192.803 314.9 192.329 315.017 191.806 315.017ZM197.852 307.065H199.212V307.593C199.212 307.764 199.212 307.935 199.212 308.105C199.436 307.743 199.767 307.439 200.204 307.193C200.641 306.937 201.105 306.809 201.596 306.809C202.183 306.809 202.689 306.932 203.116 307.177C203.543 307.412 203.868 307.764 204.092 308.233C204.327 308.703 204.444 309.263 204.444 309.913V314.777H203.068V310.089C203.068 309.343 202.935 308.793 202.668 308.441C202.401 308.079 201.969 307.897 201.372 307.897C200.935 307.897 200.551 307.999 200.22 308.201C199.9 308.404 199.655 308.676 199.484 309.017C199.313 309.359 199.228 309.732 199.228 310.137V314.777H197.852V307.065ZM209.783 315.017C209.1 315.017 208.492 314.857 207.959 314.537C207.426 314.217 207.004 313.748 206.695 313.129C206.386 312.511 206.231 311.775 206.231 310.921C206.231 310.143 206.375 309.444 206.663 308.825C206.962 308.196 207.383 307.705 207.927 307.353C208.471 306.991 209.1 306.809 209.815 306.809C210.402 306.809 210.908 306.943 211.335 307.209C211.772 307.465 212.092 307.764 212.295 308.105C212.295 307.892 212.295 307.684 212.295 307.481V303.577H213.671V314.777H212.295V314.329C212.295 314.116 212.295 313.908 212.295 313.705C212.082 314.079 211.746 314.393 211.287 314.649C210.839 314.895 210.338 315.017 209.783 315.017ZM210.023 313.945C210.482 313.945 210.887 313.823 211.239 313.577C211.602 313.321 211.884 312.964 212.087 312.505C212.29 312.047 212.391 311.513 212.391 310.905C212.391 309.999 212.172 309.273 211.735 308.729C211.298 308.175 210.727 307.897 210.023 307.897C209.564 307.897 209.154 308.025 208.791 308.281C208.439 308.527 208.162 308.879 207.959 309.337C207.756 309.796 207.655 310.324 207.655 310.921C207.655 311.519 207.751 312.047 207.943 312.505C208.146 312.964 208.423 313.321 208.775 313.577C209.138 313.823 209.554 313.945 210.023 313.945ZM218.743 315.017C218.061 315.017 217.474 314.9 216.983 314.665C216.493 314.431 216.114 314.105 215.847 313.689C215.581 313.273 215.442 312.788 215.431 312.233H216.775C216.797 312.767 216.978 313.188 217.319 313.497C217.671 313.796 218.151 313.945 218.759 313.945C219.293 313.945 219.719 313.833 220.039 313.609C220.37 313.375 220.535 313.065 220.535 312.681C220.535 312.372 220.423 312.121 220.199 311.929C219.986 311.727 219.65 311.583 219.191 311.497L218.023 311.273C217.287 311.135 216.711 310.879 216.295 310.505C215.879 310.132 215.671 309.657 215.671 309.081C215.671 308.644 215.799 308.255 216.055 307.913C216.311 307.572 216.663 307.305 217.111 307.113C217.57 306.911 218.087 306.809 218.663 306.809C219.282 306.809 219.815 306.911 220.263 307.113C220.711 307.305 221.058 307.588 221.303 307.961C221.559 308.324 221.703 308.767 221.735 309.289H220.375C220.322 308.831 220.135 308.484 219.815 308.249C219.506 308.015 219.09 307.897 218.567 307.897C218.109 307.897 217.741 307.999 217.463 308.201C217.186 308.404 217.047 308.671 217.047 309.001C217.047 309.3 217.154 309.535 217.367 309.705C217.581 309.876 217.911 310.004 218.359 310.089L219.559 310.313C220.295 310.452 220.866 310.703 221.271 311.065C221.687 311.428 221.895 311.919 221.895 312.537C221.895 312.996 221.767 313.417 221.511 313.801C221.255 314.175 220.887 314.473 220.407 314.697C219.938 314.911 219.383 315.017 218.743 315.017Z" fill="white" />
                            <defs>
                                <clipPath id="clip0_5_14288">
                                    <rect width="73.6249" height="200" fill="white" transform="translate(127.375 1.31641)" />
                                </clipPath>
                            </defs>
                        </svg>

                    <?php endif; ?>

                </div>


        <?php
                $index++;
            endwhile;

        endif;

        ?>

        <!-- Modal -->
        <div id="figpie__modal"
            class="modal"
            x-transition
            x-ref="modal"
            :class="{ 'active': isModalOpen }"
            @keydown.escape.window="closeModal()"
            @keydown.window="handleKeyNavigation"
            @click.self="closeModal()">
            <div class="modal-inner">

                <div class="modal-close-wrapper">
                    <button id="close" class="modal-close" @click="closeModal()">Ã—</button>
                </div>

                <div class="modal-content">

                    <div class="modal-heading">
                        <h3 x-text="currentProject.title"></h3>
                        <p x-html="currentProject.content"></p>
                    </div>

                    <div class="modal-stats" x-show="currentProject.stats && currentProject.stats.length">
                        <template x-for="item in currentProject.stats" :key="item.label">
                            <div class="stat">
                                <h3 x-text="item.value"></h3>
                                <span x-text="item.label"></span>
                            </div>
                        </template>
                    </div>

                </div>
            </div>
        </div>

    </div>

    <div class="legend">

        <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_5_14280)">
                <path d="M16.5732 6.15625C16.8489 6.99327 17 7.8871 17 8.81641C17 13.5108 13.1944 17.3164 8.5 17.3164C7.57069 17.3164 6.67686 17.1653 5.83984 16.8896L16.5732 6.15625ZM14.7119 3.01758C15.2988 3.64606 15.793 4.36227 16.1689 5.14648L5 16.3164L5.42285 16.7393C4.40607 16.3441 3.48459 15.76 2.70117 15.0283L14.7119 3.01758ZM11.7637 0.96582C12.577 1.30435 13.3258 1.7663 13.9883 2.32715L2.01074 14.3047C1.4499 13.6422 0.987939 12.8935 0.649414 12.0801L11.7637 0.96582ZM8.5 0.316406C9.26384 0.316406 10.0038 0.418478 10.708 0.607422L0.291016 11.0244C0.102072 10.3202 0 9.58025 0 8.81641C0 4.12199 3.80558 0.316406 8.5 0.316406Z" fill="#34335D" />
            </g>
            <defs>
                <clipPath id="clip0_5_14280">
                    <rect x="0.5" y="0.816406" width="16" height="16" rx="8" fill="white" />
                </clipPath>
            </defs>
        </svg>

        <span>6% cash etc</span>

    </div>

</div>

</div>


<script>
    function figpieModal() {
        const projects = <?php echo json_encode($posts_data, JSON_HEX_TAG | JSON_HEX_AMP | JSON_HEX_APOS | JSON_HEX_QUOT); ?>;

        return {
            modalIndex: -1,
            projects: projects,
            hasMultipleProjects: false,

            init() {
                this.hasMultipleProjects = this.projects.length > 1;
            },

            get currentProject() {
                return this.projects[this.modalIndex] || {};
            },

            get isModalOpen() {
                return this.modalIndex >= 0;
            },

            openModal(index) {
                // Validate the index exists
                if (index < 0 || index >= this.projects.length || !this.projects[index]) {
                    return;
                }

                this.modalIndex = index;

                // Add active class and prevent body scrolling
                this.$nextTick(() => {
                    const modal = document.getElementById('figpie__modal');
                    if (modal) {
                        modal.classList.add('active');
                    }
                    document.documentElement.classList.add('menu-opened');
                    document.body.style.overflow = 'hidden';
                });
            },

            closeModal() {
                this.modalIndex = -1;

                // Remove active class and restore body scrolling
                const modal = document.getElementById('figpie__modal');
                if (modal) {
                    modal.classList.remove('active');
                }
                document.documentElement.classList.remove('menu-opened');
                document.body.style.overflow = '';
            },

            next() {
                if (this.modalIndex < this.projects.length - 1) {
                    this.modalIndex++;
                }
            },

            prev() {
                if (this.modalIndex > 0) {
                    this.modalIndex--;
                }
            },

            handleKeyNavigation(event) {
                if (!this.isModalOpen) return;

                if (event.key === 'ArrowRight') {
                    this.next();
                } else if (event.key === 'ArrowLeft') {
                    this.prev();
                }
            }
        }
    }
</script>